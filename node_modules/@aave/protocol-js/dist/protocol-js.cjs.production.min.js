"use strict";function e(e){return e&&"object"==typeof e&&"default"in e?e.default:e}Object.defineProperty(exports,"__esModule",{value:!0});var t=require("bignumber.js"),n=e(t),r=require("tslib"),a=require("ethers");require("reflect-metadata");var i=require("ethers/lib/utils"),o=e(require("axios"));function s(e,t,n,r,a,i,o){try{var s=e[i](o),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,a)}function u(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function o(e){s(i,r,a,o,u,"next",e)}function u(e){s(i,r,a,o,u,"throw",e)}o(void 0)}))}}function p(){return(p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function l(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}function d(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)t.indexOf(n=i[r])>=0||(a[n]=e[n]);return a}var c=n.clone({DECIMAL_PLACES:0,ROUNDING_MODE:n.ROUND_DOWN});function y(e){return new n(e)}function m(e){return new c(e)}var f=new n(10),T={};function g(e){return T[e]||(T[e]=f.pow(e)),T[e]}function v(e,t){return h(e,t).toString(10)}function h(e,t){return y(e).dividedBy(g(t))}var _,b=m(10).pow(18),x=b.dividedBy(2),w=m(10).pow(27),A=w.dividedBy(2),E=m(10).pow(9);function C(e,t){return A.plus(m(e).multipliedBy(t)).div(w)}function S(e,t){return m(t).div(2).plus(m(e).multipliedBy(w)).div(t)}function B(e){return m(E).div(2).plus(e).div(E)}function P(e){return m(e).multipliedBy(E).decimalPlaces(0)}function D(e,t){var n=m(e),r=m(t),a=r.modulo(2).eq(0)?m(w):n;for(r=r.div(2);!r.eq(0);r=r.div(2))n=C(n,n),r.modulo(2).eq(0)||(a=C(a,n));return a}function R(e,t){var n=m(e),r=m(t);if(r.eq(0))return w;var a=r.minus(1),i=r.gt(2)?r.minus(2):0,o=C(n,n),s=C(o,n),u=r.multipliedBy(n),p=r.multipliedBy(a).multipliedBy(o).div(2),l=r.multipliedBy(a).multipliedBy(i).multipliedBy(s).div(6);return w.plus(u).plus(p).plus(l)}!function(e){e.None="None",e.Stable="Stable",e.Variable="Variable"}(_||(_={}));var k=y("31536000");function O(e,t,n){var r=m(t-n);return R(m(e).dividedBy(k),r)}function I(e,t,n,r,a){var i=m(e);if(i.eq("0"))return i;var o=C(O(n,a,r),t);return B(C(P(i),o))}var N=function(e,t,n){return C(e,S(P(m(t-n)),P(k))).plus(w)};function L(e,t,n,r){return m(e).eq("0")?m(t):C(N(e,r,n),t)}function V(e,t,n,r,a){return B(C(P(e),L(n,t,r,a)))}function M(e,t,n,r){var a=m(e);if(a.eq("0"))return a;var i=O(t,r,n);return B(C(P(a),i))}function U(e,t,n){return y(t).eq(0)?y("-1"):y(e).multipliedBy(n).dividedBy(g(4)).div(t)}function H(e,t,n){if(m(n).eq(0))return m("0");var r=m(e).multipliedBy(n).dividedBy(g(4)).minus(t);return r.gt("0")?r:m("0")}function F(e,t,n,r){return y(t).dividedBy(e).minus("1").dividedBy(r-n).multipliedBy(k).toString()}function G(e,t,n){var r,a=m(t.principalBorrows);return a.eq("0")?m("0"):(r=t.borrowRateMode===_.Variable?S(C(q(e.variableBorrowRate,n,e.lastUpdateTimestamp),e.variableBorrowIndex),t.variableBorrowIndex):q(t.borrowRate,n,t.lastUpdateTimestamp),B(C(P(a),r)))}var q=function(e,t,n){var r=m(t-n);return R(m(e).dividedBy(k),r)};function W(e,t,n,r){return y(t).eq(0)?y("-1"):y(e).multipliedBy(r).dividedBy(100).div(y(t).plus(n))}function j(e,t,n,r){if(m(r).eq(0))return m("0");var a=m(e).multipliedBy(r).dividedBy(100);if(a.lt(t))return m("0");var i=(a=a.minus(t).minus(n)).multipliedBy("0.0025");return a.minus(i)}function K(e,t,n,r){return B(S(C(P(e),L(n.liquidityRate,n.liquidityIndex,n.lastUpdateTimestamp,r)),t.userBalanceIndex))}function Y(e,t,n){return"0"===e.principalATokenBalance&&"0"===e.redirectedBalance?m("0"):"0x0000000000000000000000000000000000000000"!==e.interestRedirectionAddress?m(e.principalATokenBalance).plus(K(e.redirectedBalance,e,t,n).minus(e.redirectedBalance)):K(y(e.redirectedBalance).plus(e.principalATokenBalance).toString(),e,t,n).minus(e.redirectedBalance)}function X(e,t,r,a,i){var o=m("0"),s=m("0"),u=m("0"),l=m("0"),d=y("0"),c=y("0"),f=t.map((function(t){var n=e.find((function(e){return e.id===t.reserve.id}));if(!n)throw new Error("Reserve is not registered on platform, please contact support");var r=function(e,t,n,r){var a=e.price.priceInEth,i=e.decimals,o=Y(t,e,r),s=o.multipliedBy(a).dividedBy(g(i)),u=s.multipliedBy(g(10)).dividedBy(n).toFixed(0),l=m(t.principalBorrows).multipliedBy(a).dividedBy(g(i)),d=l.multipliedBy(g(10)).dividedBy(n).toFixed(0),c=G(e,t,r),y=c.multipliedBy(a).dividedBy(g(i)),f=y.multipliedBy(g(10)).dividedBy(n).toFixed(0),T=m(t.originationFee).multipliedBy(a).dividedBy(g(i));return p({},t,{principalBorrowsUSD:d,currentBorrowsUSD:f,originationFeeUSD:T.multipliedBy(g(10)).dividedBy(n).toFixed(0),currentUnderlyingBalanceUSD:u,originationFeeETH:T.toString(),currentBorrows:c.toString(),currentBorrowsETH:y.toString(),principalBorrowsETH:l.toString(),currentUnderlyingBalance:o.toFixed(),currentUnderlyingBalanceETH:s.toFixed()})}(n,t,a,i);return o=o.plus(r.currentUnderlyingBalanceETH),u=u.plus(r.currentBorrowsETH),l=l.plus(r.originationFeeETH),n.usageAsCollateralEnabled&&t.usageAsCollateralEnabledOnUser&&(s=s.plus(r.currentUnderlyingBalanceETH),d=d.plus(y(r.currentUnderlyingBalanceETH).multipliedBy(n.baseLTVasCollateral)),c=c.plus(y(r.currentUnderlyingBalanceETH).multipliedBy(n.reserveLiquidationThreshold))),r})).sort((function(e,t){return e.reserve.symbol>t.reserve.symbol?1:e.reserve.symbol<t.reserve.symbol?-1:0}));d.gt(0)&&(d=d.div(s).decimalPlaces(0,n.ROUND_DOWN)),c.gt(0)&&(c=c.div(s).decimalPlaces(0,n.ROUND_DOWN));var T=W(s,u,l,c),v=s.multipliedBy(g(10)).dividedBy(a).toString(),h=o.multipliedBy(g(10)).dividedBy(a).toString(),_=u.multipliedBy(g(10)).dividedBy(a).toString(),b=l.multipliedBy(g(10)).dividedBy(a),x=l.plus(u),w=b.plus(_),A=j(s,u,l,d),E=u.plus(l),C=o.minus(E.eq(0)?"0":E.multipliedBy(100).dividedBy(c));return{totalLiquidityUSD:h,totalCollateralUSD:v,totalBorrowsUSD:_,id:r,totalLiquidityETH:o.toString(),totalCollateralETH:s.toString(),totalFeesETH:l.toString(),totalBorrowsETH:u.toString(),availableBorrowsETH:A.toString(),currentLoanToValue:d.toString(),currentLiquidationThreshold:c.toString(),maxAmountToWithdrawInEth:C.toString(),healthFactor:T.toString(),reservesData:f,totalFeesUSD:b.toString(),totalBorrowsWithFeesETH:x.toString(),totalBorrowsWithFeesUSD:w.toString()}}var Q={__proto__:null,getCompoundedBorrowBalance:G,calculateCompoundedInterest:q,calculateHealthFactorFromBalances:W,calculateHealthFactorFromBalancesBigUnits:function(e,t,r,a){return W(e,t,r,new n(a).multipliedBy(100).decimalPlaces(0,n.ROUND_DOWN))},calculateAvailableBorrowsETH:j,calculateCumulatedBalance:K,calculateCurrentUnderlyingBalance:Y,computeRawUserSummaryData:X,formatUserSummaryData:function(e,t,n,r,a){var i=X(e,t,n,r,a),o=i.reservesData.map((function(e){var t=e.reserve,n=d(e,["reserve"]),r=t.decimals;return p({},n,{reserve:p({},t,{reserveLiquidationBonus:v(y(t.reserveLiquidationBonus).minus(100),2),liquidityRate:v(t.liquidityRate,27)}),redirectedBalance:v(n.redirectedBalance,r),principalATokenBalance:v(n.principalATokenBalance,r),borrowRate:v(n.borrowRate,27),lastUpdateTimestamp:n.lastUpdateTimestamp,variableBorrowIndex:v(n.variableBorrowIndex,27),userBalanceIndex:v(n.userBalanceIndex,27),currentUnderlyingBalance:v(n.currentUnderlyingBalance,r),currentUnderlyingBalanceETH:v(n.currentUnderlyingBalanceETH,18),currentUnderlyingBalanceUSD:v(n.currentUnderlyingBalanceUSD,10),principalBorrows:v(n.principalBorrows,r),principalBorrowsETH:v(n.principalBorrowsETH,18),principalBorrowsUSD:v(n.principalBorrowsUSD,10),currentBorrows:v(n.currentBorrows,r),currentBorrowsETH:v(n.currentBorrowsETH,18),currentBorrowsUSD:v(n.currentBorrowsUSD,10),originationFee:v(n.originationFee,r),originationFeeETH:v(n.originationFeeETH,18),originationFeeUSD:v(n.originationFeeUSD,10)})}));return{id:i.id,reservesData:o,totalLiquidityETH:v(i.totalLiquidityETH,18),totalLiquidityUSD:v(i.totalLiquidityUSD,10),totalCollateralETH:v(i.totalCollateralETH,18),totalCollateralUSD:v(i.totalCollateralUSD,10),totalFeesETH:v(i.totalFeesETH,18),totalFeesUSD:v(i.totalFeesUSD,10),totalBorrowsETH:v(i.totalBorrowsETH,18),totalBorrowsUSD:v(i.totalBorrowsUSD,10),totalBorrowsWithFeesETH:v(i.totalBorrowsWithFeesETH,18),totalBorrowsWithFeesUSD:v(i.totalBorrowsWithFeesUSD,10),availableBorrowsETH:v(i.availableBorrowsETH,18),currentLoanToValue:v(i.currentLoanToValue,2),currentLiquidationThreshold:v(i.currentLiquidationThreshold,2),maxAmountToWithdrawInEth:v(i.maxAmountToWithdrawInEth,18),healthFactor:i.healthFactor}},formatReserves:function(e,t){return e.map((function(e){var n,r,a=null==t?void 0:null==(n=t.find((function(t){return t.id===e.id})))?void 0:null==(r=n.paramsHistory)?void 0:r[0];return p({},e,{price:p({},e.price,{priceInEth:v(e.price.priceInEth,18)}),baseLTVasCollateral:v(e.baseLTVasCollateral,2),variableBorrowRate:v(e.variableBorrowRate,27),avg30DaysVariableBorrowRate:a?F(a.variableBorrowIndex,e.variableBorrowIndex,a.timestamp,e.lastUpdateTimestamp):void 0,avg30DaysLiquidityRate:a?F(a.liquidityIndex,e.liquidityIndex,a.timestamp,e.lastUpdateTimestamp):void 0,stableBorrowRate:v(e.stableBorrowRate,27),liquidityRate:v(e.liquidityRate,27),totalLiquidity:v(e.totalLiquidity,e.decimals),availableLiquidity:v(e.availableLiquidity,e.decimals),liquidityIndex:v(e.liquidityIndex,27),reserveLiquidationThreshold:v(e.reserveLiquidationThreshold,2),reserveLiquidationBonus:v(y(e.reserveLiquidationBonus).minus(100),2),totalBorrows:v(e.totalBorrows,e.decimals),totalBorrowsVariable:v(e.totalBorrowsVariable,e.decimals),totalBorrowsStable:v(e.totalBorrowsStable,e.decimals),variableBorrowIndex:v(e.variableBorrowIndex,27)})}))},calculateInterestRates:function(e,t,n,r){void 0===r&&(r="variable");var a=e.optimalUtilisationRate,i=y(e.baseVariableBorrowRate),o=y(e.totalBorrowsStable).plus("stable"===r?n:"0"),s=y(e.totalBorrowsVariable).plus("variable"===r?n:"0"),u=o.plus(s),p=y(e.totalLiquidity).plus(t),l=p.eq(0)&&u.eq(0)?y(0):u.dividedBy(p),d=y(e.stableBorrowRate),c=y(0),m=y(0);if(l.gt(a)){var f=l.minus(a).dividedBy(y(1).minus(a));d=d.plus(e.stableRateSlope1).plus(f.multipliedBy(e.stableRateSlope2)),c=i.plus(e.variableRateSlope1).plus(f.multipliedBy(e.variableRateSlope2))}else d=c.plus(l.dividedBy(a).multipliedBy(e.stableRateSlope1)),c=i.plus(l.dividedBy(a).multipliedBy(e.variableRateSlope1));if(!u.eq(0)){var T=c.multipliedBy(s),g=y(e.averageStableBorrowRate).multipliedBy(o);m=T.plus(g).dividedBy(u)}return{variableBorrowRate:c.toString(),stableBorrowRate:d.toString(),liquidityRate:m.toString()}},get BorrowRateMode(){return _}};function z(e,t,n,r){var a=m(e).multipliedBy(t).dividedBy(g(n)),i=a.multipliedBy(g(10)).dividedBy(r).toFixed(0);return[a.toString(),i]}function J(e,t,r,a,i){var o=e.price.priceInEth,s=e.decimals,u=V(t.scaledATokenBalance,e.liquidityIndex,e.liquidityRate,e.lastUpdateTimestamp,a).toString(),l=z(u,o,s,r),d=l[0],c=l[1],y=I(t.scaledVariableDebt,e.variableBorrowIndex,e.variableBorrowRate,e.lastUpdateTimestamp,a).toString(),f=z(y,o,s,r),T=f[0],g=f[1],h=M(t.principalStableDebt,e.stableBorrowRate,t.stableBorrowLastUpdateTimestamp,a).toString(),_=z(h,o,s,r),b=_[0],x=_[1],A=re({totalScaledVariableDebt:e.totalScaledVariableDebt,variableBorrowIndex:e.variableBorrowIndex,variableBorrowRate:e.variableBorrowRate,totalPrincipalStableDebt:e.totalPrincipalStableDebt,averageStableRate:e.averageStableRate,availableLiquidity:e.availableLiquidity,stableDebtLastUpdateTimestamp:e.stableDebtLastUpdateTimestamp,lastUpdateTimestamp:e.lastUpdateTimestamp},a),E=A.totalLiquidity,C=A.totalStableDebt,B=A.totalVariableDebt,P=E.gt(0)?ie(t.scaledATokenBalance,e.aTokenIncentivesIndex,t.aTokenincentivesUserIndex,i.incentivePrecision,i.rewardTokenDecimals,e.aIncentivesLastUpdateTimestamp,e.aEmissionPerSecond,S(E,e.liquidityIndex),a,i.emissionEndTimestamp):"0",R=z(P,i.rewardTokenPriceEth,i.rewardTokenDecimals,r),O=R[0],N=R[1],L=B.gt(0)?ie(t.scaledVariableDebt,e.vTokenIncentivesIndex,t.vTokenincentivesUserIndex,i.incentivePrecision,i.rewardTokenDecimals,e.vIncentivesLastUpdateTimestamp,e.vEmissionPerSecond,new n(e.totalScaledVariableDebt),a,i.emissionEndTimestamp):"0",U=z(L,i.rewardTokenPriceEth,i.rewardTokenDecimals,r),H=U[0],F=U[1],G=C.gt(0)?ie(t.principalStableDebt,e.sTokenIncentivesIndex,t.sTokenincentivesUserIndex,i.incentivePrecision,i.rewardTokenDecimals,e.sIncentivesLastUpdateTimestamp,e.sEmissionPerSecond,new n(e.totalPrincipalStableDebt),a,i.emissionEndTimestamp):"0",q=z(G,i.rewardTokenPriceEth,i.rewardTokenDecimals,r),W=q[0],j=q[1],K=D(m(t.stableBorrowRate).dividedBy(k).plus(w),k).minus(w);return p({},t,{underlyingBalance:u,underlyingBalanceETH:d,underlyingBalanceUSD:c,variableBorrows:y,variableBorrowsETH:T,variableBorrowsUSD:g,stableBorrows:h,stableBorrowsETH:b,stableBorrowsUSD:x,totalBorrows:m(y).plus(h).toString(),totalBorrowsETH:m(T).plus(b).toString(),totalBorrowsUSD:m(g).plus(x).toString(),aTokenRewards:P,aTokenRewardsETH:O,aTokenRewardsUSD:N,vTokenRewards:L,vTokenRewardsETH:H,vTokenRewardsUSD:F,sTokenRewards:G,sTokenRewardsETH:W,sTokenRewardsUSD:j,totalRewards:m(P).plus(L).plus(G).toString(),totalRewardsETH:m(O).plus(H).plus(W).toString(),totalRewardsUSD:m(N).plus(F).plus(j).toString(),stableBorrowAPR:v(t.stableBorrowRate,27),stableBorrowAPY:v(K,27)})}function Z(e,t,r,a,i,o){var s=m("0"),u=m("0"),p=m("0"),l=y("0"),d=y("0"),c=y("0"),f=y("0"),T=y("0"),v=t.map((function(t){var n=e.find((function(e){return e.id===t.reserve.id}));if(!n)throw new Error("Reserve is not registered on platform, please contact support");var r=J(n,t,a,i,o);return c=c.plus(r.totalRewards),f=f.plus(r.totalRewardsETH),T=T.plus(r.totalRewardsUSD),s=s.plus(r.underlyingBalanceETH),p=p.plus(r.variableBorrowsETH).plus(r.stableBorrowsETH),n.usageAsCollateralEnabled&&t.usageAsCollateralEnabledOnUser&&(u=u.plus(r.underlyingBalanceETH),l=l.plus(y(r.underlyingBalanceETH).multipliedBy(n.baseLTVasCollateral)),d=d.plus(y(r.underlyingBalanceETH).multipliedBy(n.reserveLiquidationThreshold))),r})).sort((function(e,t){return e.reserve.symbol>t.reserve.symbol?1:e.reserve.symbol<t.reserve.symbol?-1:0}));l.gt(0)&&(l=l.div(u).decimalPlaces(0,n.ROUND_DOWN)),d.gt(0)&&(d=d.div(u).decimalPlaces(0,n.ROUND_DOWN));var h=U(u,p,d),_=u.multipliedBy(g(10)).dividedBy(a).toString(),b=s.multipliedBy(g(10)).dividedBy(a).toString(),x=p.multipliedBy(g(10)).dividedBy(a).toString(),w=H(u,p,l);return{totalLiquidityUSD:b,totalCollateralUSD:_,totalBorrowsUSD:x,totalRewards:c.toString(),totalRewardsETH:f.toString(),totalRewardsUSD:T.toString(),id:r,totalLiquidityETH:s.toString(),totalCollateralETH:u.toString(),totalBorrowsETH:p.toString(),availableBorrowsETH:w.toString(),currentLoanToValue:l.toString(),currentLiquidationThreshold:d.toString(),healthFactor:h.toString(),reservesData:v}}function $(e,t,n,r,a,i){var o=Z(e,t,n,r,a,i),s=o.reservesData.map((function(e){var t=e.reserve,n=d(e,["reserve"]),r=t.decimals,a=D(m(n.stableBorrowRate).dividedBy(k).plus(w),k).minus(w);return p({},n,{reserve:p({},t,{reserveLiquidationBonus:v(y(t.reserveLiquidationBonus).minus(g(4)),4)}),scaledATokenBalance:v(n.scaledATokenBalance,r),stableBorrowAPR:v(n.stableBorrowRate,27),stableBorrowAPY:v(a,27),variableBorrowIndex:v(n.variableBorrowIndex,27),underlyingBalance:v(n.underlyingBalance,r),underlyingBalanceETH:v(n.underlyingBalanceETH,18),underlyingBalanceUSD:v(n.underlyingBalanceUSD,10),stableBorrows:v(n.stableBorrows,r),stableBorrowsETH:v(n.stableBorrowsETH,18),stableBorrowsUSD:v(n.stableBorrowsUSD,10),variableBorrows:v(n.variableBorrows,r),variableBorrowsETH:v(n.variableBorrowsETH,18),variableBorrowsUSD:v(n.variableBorrowsUSD,10),totalBorrows:v(n.totalBorrows,r),totalBorrowsETH:v(n.totalBorrowsETH,18),totalBorrowsUSD:v(n.totalBorrowsUSD,10)})}));return{id:o.id,reservesData:s,totalLiquidityETH:v(o.totalLiquidityETH,18),totalLiquidityUSD:v(o.totalLiquidityUSD,10),totalCollateralETH:v(o.totalCollateralETH,18),totalCollateralUSD:v(o.totalCollateralUSD,10),totalBorrowsETH:v(o.totalBorrowsETH,18),totalBorrowsUSD:v(o.totalBorrowsUSD,10),availableBorrowsETH:v(o.availableBorrowsETH,18),currentLoanToValue:v(o.currentLoanToValue,4),currentLiquidationThreshold:v(o.currentLiquidationThreshold,4),healthFactor:o.healthFactor,totalRewards:o.totalRewards,totalRewardsETH:o.totalRewardsETH,totalRewardsUSD:o.totalRewardsUSD}}function ee(e,t){return{totalVariableDebt:v(C(C(e.totalScaledVariableDebt,e.variableBorrowIndex),O(e.variableBorrowRate,t,e.lastUpdateTimestamp)),e.decimals),totalStableDebt:v(C(e.totalPrincipalStableDebt,O(e.averageStableRate,t,e.stableDebtLastUpdateTimestamp)),e.decimals)}}function te(e,t,n,r,a){return void 0===r&&(r="0"),e.map((function(e){var i,o,s=null==n?void 0:null==(i=n.find((function(t){return t.id===e.id})))?void 0:null==(o=i.paramsHistory)?void 0:o[0],u=v(e.availableLiquidity,e.decimals),l=ee(e,t||e.lastUpdateTimestamp),d=l.totalVariableDebt,c=l.totalStableDebt,f=y(c).plus(d),T=f.plus(u).toString(),g="0"!==T?f.dividedBy(T).toString():"0",h=a&&a>(t||Math.floor(Date.now()/1e3)),_=h&&"0"!==T?ae(e.aEmissionPerSecond,r,T,e.price.priceInEth):"0",b=h&&"0"!==d?ae(e.vEmissionPerSecond,r,d,e.price.priceInEth):"0",x=h&&"0"!==c?ae(e.sEmissionPerSecond,r,c,e.price.priceInEth):"0",A=D(m(e.liquidityRate).dividedBy(k).plus(w),k).minus(w),E=D(m(e.variableBorrowRate).dividedBy(k).plus(w),k).minus(w),C=D(m(e.stableBorrowRate).dividedBy(k).plus(w),k).minus(w);return p({},e,{totalVariableDebt:d,totalStableDebt:c,totalLiquidity:T,availableLiquidity:u,utilizationRate:g,aIncentivesAPY:_,vIncentivesAPY:b,sIncentivesAPY:x,totalDebt:f.toString(),price:p({},e.price,{priceInEth:v(e.price.priceInEth,18)}),baseLTVasCollateral:v(e.baseLTVasCollateral,4),reserveFactor:v(e.reserveFactor,4),variableBorrowAPR:v(e.variableBorrowRate,27),variableBorrowAPY:v(E,27),avg30DaysVariableBorrowRate:s?F(s.variableBorrowIndex,e.variableBorrowIndex,s.timestamp,e.lastUpdateTimestamp):void 0,avg30DaysLiquidityRate:s?F(s.liquidityIndex,e.liquidityIndex,s.timestamp,e.lastUpdateTimestamp):void 0,stableBorrowAPR:v(e.stableBorrowRate,27),stableBorrowAPY:v(C,27),supplyAPR:v(e.liquidityRate,27),supplyAPY:v(A,27),liquidityIndex:v(e.liquidityIndex,27),reserveLiquidationThreshold:v(e.reserveLiquidationThreshold,4),reserveLiquidationBonus:v(y(e.reserveLiquidationBonus).minus(Math.pow(10,4)),4),totalScaledVariableDebt:v(e.totalScaledVariableDebt,e.decimals),totalPrincipalStableDebt:v(e.totalPrincipalStableDebt,e.decimals),variableBorrowIndex:v(e.variableBorrowIndex,27)})}))}function ne(e,t){return{totalVariableDebt:C(C(e.totalScaledVariableDebt,e.variableBorrowIndex),O(e.variableBorrowRate,t,e.lastUpdateTimestamp)),totalStableDebt:C(e.totalPrincipalStableDebt,O(e.averageStableRate,t,e.stableDebtLastUpdateTimestamp))}}function re(e,t){var n=ne(e,t),r=n.totalVariableDebt,a=n.totalStableDebt,i=r.plus(a);return{totalVariableDebt:r,totalStableDebt:a,totalLiquidity:i.plus(e.availableLiquidity)}}function ae(e,t,n,r){var a=h(e,18).multipliedBy(t).multipliedBy(k),i=y(n).multipliedBy(r);return a.dividedBy(i).toString(10)}function ie(e,t,n,r,a,i,o,s,u,p){var l,d=(u>p?p:u)-i;return l=i==+u||i>=p?m(t):m(o).multipliedBy(d).multipliedBy(g(r)).dividedBy(s).plus(t),v(m(e).multipliedBy(l.minus(n)).dividedBy(g(r)),a)}var oe,se,ue,pe,le,de,ce,ye,me={__proto__:null,getEthAndUsdBalance:z,computeUserReserveData:J,computeRawUserSummaryData:Z,formatUserSummaryData:$,calculateReserveDebt:ee,formatReserves:te,calculateReserveDebtSuppliesRaw:ne,calculateSupplies:re,calculateIncentivesAPY:ae,calculateRewards:ie};(oe=exports.InterestRate||(exports.InterestRate={})).None="None",oe.Stable="Stable",oe.Variable="Variable",(se=exports.Market||(exports.Market={})).Proto="proto",se.AMM="amm",(ue=exports.Network||(exports.Network={})).mainnet="mainnet",ue.ropsten="ropsten",ue.kovan="kovan",ue.polygon="polygon",ue.fork="fork",ue.mumbai="mumbai",ue.polygon_fork="polygon_fork",ue.avalanche="avalanche",ue.avalanche_fork="avalanche_fork",ue.fuji="fuji",ue.arbitrum_one="arbitrum_one",ue.arbitrum_rinkeby="arbitrum_rinkeby",(pe=exports.ChainId||(exports.ChainId={}))[pe.mainnet=1]="mainnet",pe[pe.ropsten=3]="ropsten",pe[pe.kovan=42]="kovan",pe[pe.polygon=137]="polygon",pe[pe.fork=1337]="fork",pe[pe.mumbai=80001]="mumbai",pe[pe.polygon_fork=1338]="polygon_fork",pe[pe.avalanche=43114]="avalanche",pe[pe.avalanche_fork=1337]="avalanche_fork",pe[pe.fuji=43113]="fuji",pe[pe.arbitrum_one=42161]="arbitrum_one",pe[pe.arbitrum_rinkeby=421611]="arbitrum_rinkeby",(le=exports.eEthereumTxType||(exports.eEthereumTxType={})).ERC20_APPROVAL="ERC20_APPROVAL",le.DLP_ACTION="DLP_ACTION",le.GOVERNANCE_ACTION="GOVERNANCE_ACTION",le.GOV_DELEGATION_ACTION="GOV_DELEGATION_ACTION",le.STAKE_ACTION="STAKE_ACTION",le.MIGRATION_LEND_AAVE="MIGRATION_LEND_AAVE",le.FAUCET_MINT="FAUCET_MINT",le.REWARD_ACTION="REWARD_ACTION",(de=exports.ProtocolAction||(exports.ProtocolAction={})).default="default",de.withdraw="withdraw",de.deposit="deposit",de.liquidationCall="liquidationCall",de.liquidationFlash="liquidationFlash",de.repay="repay",de.swapCollateral="swapCollateral",de.repayCollateral="repayCollateral",de.withdrawETH="withdrawETH",de.borrowETH="borrwoETH",(ce=exports.GovernanceVote||(exports.GovernanceVote={}))[ce.Abstain=0]="Abstain",ce[ce.Yes=1]="Yes",ce[ce.No=2]="No",(ye=exports.Stake||(exports.Stake={})).aave="aave",ye.bpt="bpt";var fe,Te,ge,ve=(function(e){var t=function(e){var t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},a=r.iterator||"@@iterator",i=r.asyncIterator||"@@asyncIterator",o=r.toStringTag||"@@toStringTag";function s(e,t,n,r){var a=Object.create((t&&t.prototype instanceof l?t:l).prototype),i=new x(r||[]);return a._invoke=function(e,t,n){var r="suspendedStart";return function(a,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===a)throw i;return{value:void 0,done:!0}}for(n.method=a,n.arg=i;;){var o=n.delegate;if(o){var s=h(o,n);if(s){if(s===p)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var l=u(e,t,n);if("normal"===l.type){if(r=n.done?"completed":"suspendedYield",l.arg===p)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(r="completed",n.method="throw",n.arg=l.arg)}}}(e,n,i),a}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=s;var p={};function l(){}function d(){}function c(){}var y={};y[a]=function(){return this};var m=Object.getPrototypeOf,f=m&&m(m(w([])));f&&f!==t&&n.call(f,a)&&(y=f);var T=c.prototype=l.prototype=Object.create(y);function g(e){["next","throw","return"].forEach((function(t){e[t]=function(e){return this._invoke(t,e)}}))}function v(e){var t;this._invoke=function(r,a){function i(){return new Promise((function(t,i){!function t(r,a,i,o){var s=u(e[r],e,a);if("throw"!==s.type){var p=s.arg,l=p.value;return l&&"object"==typeof l&&n.call(l,"__await")?Promise.resolve(l.__await).then((function(e){t("next",e,i,o)}),(function(e){t("throw",e,i,o)})):Promise.resolve(l).then((function(e){p.value=e,i(p)}),(function(e){return t("throw",e,i,o)}))}o(s.arg)}(r,a,t,i)}))}return t=t?t.then(i,i):i()}}function h(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,h(e,t),"throw"===t.method))return p;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return p}var r=u(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,p;var a=r.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,p):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,p)}function _(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function b(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(_,this),this.reset(!0)}function w(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,i=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:A}}function A(){return{value:void 0,done:!0}}return d.prototype=T.constructor=c,c.constructor=d,c[o]=d.displayName="GeneratorFunction",e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,c):(e.__proto__=c,o in e||(e[o]="GeneratorFunction")),e.prototype=Object.create(T),e},e.awrap=function(e){return{__await:e}},g(v.prototype),v.prototype[i]=function(){return this},e.AsyncIterator=v,e.async=function(t,n,r,a){var i=new v(s(t,n,r,a));return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},g(T),T[o]="Generator",T[a]=function(){return this},T.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=w,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(b),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],o=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var s=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(s&&u){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var i=a;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,p):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),b(n),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;b(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:w(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),p}},e}(e.exports);try{regeneratorRuntime=t}catch(e){Function("r","regeneratorRuntime = r")(t)}}(ge={exports:{}}),ge.exports),he=a.BigNumber.from(0).toHexString(),_e=a.constants.MaxUint256.toString(),be="115792089237316195423570985008687907853269984665640564039457584007913129639935",xe="0xEeeeeEeeeEeEeeEeEeEeeEEEeeeeEeeeeeeeEEeE",we=((fe={})[exports.ProtocolAction.default]={limit:"210000",recommended:"210000"},fe[exports.ProtocolAction.deposit]={limit:"300000",recommended:"300000"},fe[exports.ProtocolAction.withdraw]={limit:"230000",recommended:"300000"},fe[exports.ProtocolAction.liquidationCall]={limit:"700000",recommended:"700000"},fe[exports.ProtocolAction.liquidationFlash]={limit:"995000",recommended:"995000"},fe[exports.ProtocolAction.repay]={limit:"300000",recommended:"300000"},fe[exports.ProtocolAction.borrowETH]={limit:"450000",recommended:"450000"},fe[exports.ProtocolAction.withdrawETH]={limit:"640000",recommended:"640000"},fe[exports.ProtocolAction.swapCollateral]={limit:"1000000",recommended:"1000000"},fe[exports.ProtocolAction.repayCollateral]={limit:"700000",recommended:"700000"},fe),Ae=((Te={})[exports.Network.mainnet]={SYNTHETIX_PROXY_ADDRESS:"0xc011a73ee8576fb46f5e1c5751ca3b9fe0af2a6f"},Te),Ee=function(){function e(){}return e.connect=function(e,t){return new a.Contract(e,Ce,t)},e}(),Ce=[{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"executor",type:"address"}],name:"ExecutorAuthorized",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"executor",type:"address"}],name:"ExecutorUnauthorized",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"newStrategy",type:"address"},{indexed:!0,internalType:"address",name:"initiatorChange",type:"address"}],name:"GovernanceStrategyChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"id",type:"uint256"}],name:"ProposalCanceled",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"id",type:"uint256"},{indexed:!0,internalType:"address",name:"creator",type:"address"},{indexed:!0,internalType:"contract IExecutorWithTimelock",name:"executor",type:"address"},{indexed:!1,internalType:"address[]",name:"targets",type:"address[]"},{indexed:!1,internalType:"uint256[]",name:"values",type:"uint256[]"},{indexed:!1,internalType:"string[]",name:"signatures",type:"string[]"},{indexed:!1,internalType:"bytes[]",name:"calldatas",type:"bytes[]"},{indexed:!1,internalType:"bool[]",name:"withDelegatecalls",type:"bool[]"},{indexed:!1,internalType:"uint256",name:"startBlock",type:"uint256"},{indexed:!1,internalType:"uint256",name:"endBlock",type:"uint256"},{indexed:!1,internalType:"address",name:"strategy",type:"address"},{indexed:!1,internalType:"bytes32",name:"ipfsHash",type:"bytes32"}],name:"ProposalCreated",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"id",type:"uint256"},{indexed:!0,internalType:"address",name:"initiatorExecution",type:"address"}],name:"ProposalExecuted",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"id",type:"uint256"},{indexed:!1,internalType:"uint256",name:"executionTime",type:"uint256"},{indexed:!0,internalType:"address",name:"initiatorQueueing",type:"address"}],name:"ProposalQueued",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"id",type:"uint256"},{indexed:!0,internalType:"address",name:"voter",type:"address"},{indexed:!1,internalType:"bool",name:"support",type:"bool"},{indexed:!1,internalType:"uint256",name:"votingPower",type:"uint256"}],name:"VoteEmitted",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"newVotingDelay",type:"uint256"},{indexed:!0,internalType:"address",name:"initiatorChange",type:"address"}],name:"VotingDelayChanged",type:"event"},{inputs:[],name:"__abdicate",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address[]",name:"executors",type:"address[]"}],name:"authorizeExecutors",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"proposalId",type:"uint256"}],name:"cancel",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"contract IExecutorWithTimelock",name:"executor",type:"address"},{internalType:"address[]",name:"targets",type:"address[]"},{internalType:"uint256[]",name:"values",type:"uint256[]"},{internalType:"string[]",name:"signatures",type:"string[]"},{internalType:"bytes[]",name:"calldatas",type:"bytes[]"},{internalType:"bool[]",name:"withDelegatecalls",type:"bool[]"},{internalType:"bytes32",name:"ipfsHash",type:"bytes32"}],name:"create",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"proposalId",type:"uint256"}],name:"execute",outputs:[],stateMutability:"payable",type:"function"},{inputs:[],name:"getGovernanceStrategy",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"getGuardian",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"proposalId",type:"uint256"}],name:"getProposalById",outputs:[{components:[{internalType:"uint256",name:"id",type:"uint256"},{internalType:"address",name:"creator",type:"address"},{internalType:"contract IExecutorWithTimelock",name:"executor",type:"address"},{internalType:"address[]",name:"targets",type:"address[]"},{internalType:"uint256[]",name:"values",type:"uint256[]"},{internalType:"string[]",name:"signatures",type:"string[]"},{internalType:"bytes[]",name:"calldatas",type:"bytes[]"},{internalType:"bool[]",name:"withDelegatecalls",type:"bool[]"},{internalType:"uint256",name:"startBlock",type:"uint256"},{internalType:"uint256",name:"endBlock",type:"uint256"},{internalType:"uint256",name:"executionTime",type:"uint256"},{internalType:"uint256",name:"forVotes",type:"uint256"},{internalType:"uint256",name:"againstVotes",type:"uint256"},{internalType:"bool",name:"executed",type:"bool"},{internalType:"bool",name:"canceled",type:"bool"},{internalType:"address",name:"strategy",type:"address"},{internalType:"bytes32",name:"ipfsHash",type:"bytes32"}],internalType:"struct IAaveGovernanceV2.ProposalWithoutVotes",name:"",type:"tuple"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"proposalId",type:"uint256"}],name:"getProposalState",outputs:[{internalType:"enum IAaveGovernanceV2.ProposalState",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[],name:"getProposalsCount",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"proposalId",type:"uint256"},{internalType:"address",name:"voter",type:"address"}],name:"getVoteOnProposal",outputs:[{components:[{internalType:"bool",name:"support",type:"bool"},{internalType:"uint248",name:"votingPower",type:"uint248"}],internalType:"struct IAaveGovernanceV2.Vote",name:"",type:"tuple"}],stateMutability:"view",type:"function"},{inputs:[],name:"getVotingDelay",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"executor",type:"address"}],name:"isExecutorAuthorized",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"proposalId",type:"uint256"}],name:"queue",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"governanceStrategy",type:"address"}],name:"setGovernanceStrategy",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"votingDelay",type:"uint256"}],name:"setVotingDelay",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"proposalId",type:"uint256"},{internalType:"bool",name:"support",type:"bool"}],name:"submitVote",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"proposalId",type:"uint256"},{internalType:"bool",name:"support",type:"bool"},{internalType:"uint8",name:"v",type:"uint8"},{internalType:"bytes32",name:"r",type:"bytes32"},{internalType:"bytes32",name:"s",type:"bytes32"}],name:"submitVoteBySignature",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address[]",name:"executors",type:"address[]"}],name:"unauthorizeExecutors",outputs:[],stateMutability:"nonpayable",type:"function"}],Se=function(){function e(){}return e.connect=function(e,t){return new a.Contract(e,Be,t)},e}(),Be=[{inputs:[{internalType:"address[]",name:"assets",type:"address[]"},{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"address",name:"to",type:"address"}],name:"claimRewards",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"nonpayable",type:"function"}],Pe=function(){function e(){}return e.connect=function(e,t){return new a.Contract(e,De,t)},e}(),De=[{inputs:[{internalType:"address",name:"user",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"uint8",name:"v",type:"uint8"},{internalType:"bytes32",name:"r",type:"bytes32"},{internalType:"bytes32",name:"s",type:"bytes32"}],name:"stake",outputs:[],stateMutability:"nonpayable",type:"function"}],Re=function(){function e(){}return e.connect=function(e,t){return new a.Contract(e,ke,t)},e}(),ke=[{inputs:[{internalType:"address",name:"delegatee",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"approveDelegation",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"fromUser",type:"address"},{internalType:"address",name:"toUser",type:"address"}],name:"borrowAllowance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"}],Oe=function(){function e(){}return e.connect=function(e,t){return new a.Contract(e,Ie,t)},e}(),Ie=[{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"spender",type:"address"}],name:"allowance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"approve",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"decimals",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"}],Ne=function(){function e(){}return e.connect=function(e,t){return new a.Contract(e,Le,t)},e}(),Le=[{inputs:[{internalType:"address",name:"_token",type:"address"}],name:"getMinter",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_token",type:"address"},{internalType:"uint256",name:"_amount",type:"uint256"}],name:"mint",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"payable",type:"function"}],Ve=function(){function e(){}return e.connect=function(e,t){return new a.Contract(e,Me,t)},e}(),Me=[{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"delegator",type:"address"},{indexed:!0,internalType:"address",name:"delegatee",type:"address"},{indexed:!1,internalType:"enum IGovernancePowerDelegationToken.DelegationType",name:"delegationType",type:"uint8"}],name:"DelegateChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"user",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"},{indexed:!1,internalType:"enum IGovernancePowerDelegationToken.DelegationType",name:"delegationType",type:"uint8"}],name:"DelegatedPowerChanged",type:"event"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"_nonces",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"delegatee",type:"address"}],name:"delegate",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"delegatee",type:"address"},{internalType:"uint256",name:"nonce",type:"uint256"},{internalType:"uint256",name:"expiry",type:"uint256"},{internalType:"uint8",name:"v",type:"uint8"},{internalType:"bytes32",name:"r",type:"bytes32"},{internalType:"bytes32",name:"s",type:"bytes32"}],name:"delegateBySig",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"delegatee",type:"address"},{internalType:"enum IGovernancePowerDelegationToken.DelegationType",name:"delegationType",type:"uint8"}],name:"delegateByType",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"delegatee",type:"address"},{internalType:"enum IGovernancePowerDelegationToken.DelegationType",name:"delegationType",type:"uint8"},{internalType:"uint256",name:"nonce",type:"uint256"},{internalType:"uint256",name:"expiry",type:"uint256"},{internalType:"uint8",name:"v",type:"uint8"},{internalType:"bytes32",name:"r",type:"bytes32"},{internalType:"bytes32",name:"s",type:"bytes32"}],name:"delegateByTypeBySig",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"delegator",type:"address"},{internalType:"enum IGovernancePowerDelegationToken.DelegationType",name:"delegationType",type:"uint8"}],name:"getDelegateeByType",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"user",type:"address"},{internalType:"uint256",name:"blockNumber",type:"uint256"},{internalType:"enum IGovernancePowerDelegationToken.DelegationType",name:"delegationType",type:"uint8"}],name:"getPowerAtBlock",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"user",type:"address"},{internalType:"enum IGovernancePowerDelegationToken.DelegationType",name:"delegationType",type:"uint8"}],name:"getPowerCurrent",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"blockNumber",type:"uint256"}],name:"totalSupplyAt",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"}],Ue=function(){function e(){}return e.connect=function(e,t){return new a.Contract(e,He,t)},e}(),He=[{inputs:[],name:"AAVE",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"STK_AAVE",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"user",type:"address"},{internalType:"uint256",name:"blockNumber",type:"uint256"}],name:"getPropositionPowerAt",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"blockNumber",type:"uint256"}],name:"getTotalPropositionSupplyAt",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"blockNumber",type:"uint256"}],name:"getTotalVotingSupplyAt",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"user",type:"address"},{internalType:"uint256",name:"blockNumber",type:"uint256"}],name:"getVotingPowerAt",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"}],Fe=function(){function e(){}return e.connect=function(e,t){return new a.Contract(e,Ge,t)},e}(),Ge=[{inputs:[{internalType:"uint256",name:"id",type:"uint256"},{internalType:"contract IAaveGovernanceV2",name:"governance",type:"address"}],name:"getProposal",outputs:[{components:[{internalType:"uint256",name:"totalVotingSupply",type:"uint256"},{internalType:"uint256",name:"minimumQuorum",type:"uint256"},{internalType:"uint256",name:"minimumDiff",type:"uint256"},{internalType:"uint256",name:"executionTimeWithGracePeriod",type:"uint256"},{internalType:"uint256",name:"proposalCreated",type:"uint256"},{internalType:"uint256",name:"id",type:"uint256"},{internalType:"address",name:"creator",type:"address"},{internalType:"contract IExecutorWithTimelock",name:"executor",type:"address"},{internalType:"address[]",name:"targets",type:"address[]"},{internalType:"uint256[]",name:"values",type:"uint256[]"},{internalType:"string[]",name:"signatures",type:"string[]"},{internalType:"bytes[]",name:"calldatas",type:"bytes[]"},{internalType:"bool[]",name:"withDelegatecalls",type:"bool[]"},{internalType:"uint256",name:"startBlock",type:"uint256"},{internalType:"uint256",name:"endBlock",type:"uint256"},{internalType:"uint256",name:"executionTime",type:"uint256"},{internalType:"uint256",name:"forVotes",type:"uint256"},{internalType:"uint256",name:"againstVotes",type:"uint256"},{internalType:"bool",name:"executed",type:"bool"},{internalType:"bool",name:"canceled",type:"bool"},{internalType:"address",name:"strategy",type:"address"},{internalType:"bytes32",name:"ipfsHash",type:"bytes32"},{internalType:"enum IAaveGovernanceV2.ProposalState",name:"proposalState",type:"uint8"}],internalType:"struct IGovernanceV2Helper.ProposalStats",name:"proposalStats",type:"tuple"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"skip",type:"uint256"},{internalType:"uint256",name:"limit",type:"uint256"},{internalType:"contract IAaveGovernanceV2",name:"governance",type:"address"}],name:"getProposals",outputs:[{components:[{internalType:"uint256",name:"totalVotingSupply",type:"uint256"},{internalType:"uint256",name:"minimumQuorum",type:"uint256"},{internalType:"uint256",name:"minimumDiff",type:"uint256"},{internalType:"uint256",name:"executionTimeWithGracePeriod",type:"uint256"},{internalType:"uint256",name:"proposalCreated",type:"uint256"},{internalType:"uint256",name:"id",type:"uint256"},{internalType:"address",name:"creator",type:"address"},{internalType:"contract IExecutorWithTimelock",name:"executor",type:"address"},{internalType:"address[]",name:"targets",type:"address[]"},{internalType:"uint256[]",name:"values",type:"uint256[]"},{internalType:"string[]",name:"signatures",type:"string[]"},{internalType:"bytes[]",name:"calldatas",type:"bytes[]"},{internalType:"bool[]",name:"withDelegatecalls",type:"bool[]"},{internalType:"uint256",name:"startBlock",type:"uint256"},{internalType:"uint256",name:"endBlock",type:"uint256"},{internalType:"uint256",name:"executionTime",type:"uint256"},{internalType:"uint256",name:"forVotes",type:"uint256"},{internalType:"uint256",name:"againstVotes",type:"uint256"},{internalType:"bool",name:"executed",type:"bool"},{internalType:"bool",name:"canceled",type:"bool"},{internalType:"address",name:"strategy",type:"address"},{internalType:"bytes32",name:"ipfsHash",type:"bytes32"},{internalType:"enum IAaveGovernanceV2.ProposalState",name:"proposalState",type:"uint8"}],internalType:"struct IGovernanceV2Helper.ProposalStats[]",name:"proposalsStats",type:"tuple[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"user",type:"address"},{internalType:"address[]",name:"tokens",type:"address[]"}],name:"getTokensPower",outputs:[{components:[{internalType:"uint256",name:"votingPower",type:"uint256"},{internalType:"address",name:"delegatedAddressVotingPower",type:"address"},{internalType:"uint256",name:"propositionPower",type:"uint256"},{internalType:"address",name:"delegatedAddressPropositionPower",type:"address"}],internalType:"struct IGovernanceV2Helper.Power[]",name:"power",type:"tuple[]"}],stateMutability:"view",type:"function"}],qe=function(){function e(){}return e.connect=function(e,t){return new a.Contract(e,We,t)},e}(),We=[{inputs:[],name:"FLASHLOAN_PREMIUM_TOTAL",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"reserve",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"uint256",name:"interestRateMode",type:"uint256"},{internalType:"uint16",name:"referralCode",type:"uint16"},{internalType:"address",name:"onBehalfOf",type:"address"}],name:"borrow",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"reserve",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"address",name:"onBehalfOf",type:"address"},{internalType:"uint16",name:"referralCode",type:"uint16"}],name:"deposit",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"receiver",type:"address"},{internalType:"address[]",name:"assets",type:"address[]"},{internalType:"uint256[]",name:"amounts",type:"uint256[]"},{internalType:"uint256[]",name:"modes",type:"uint256[]"},{internalType:"address",name:"onBehalfOf",type:"address"},{internalType:"bytes",name:"params",type:"bytes"},{internalType:"uint16",name:"referralCode",type:"uint16"}],name:"flashLoan",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"collateral",type:"address"},{internalType:"address",name:"reserve",type:"address"},{internalType:"address",name:"user",type:"address"},{internalType:"uint256",name:"purchaseAmount",type:"uint256"},{internalType:"bool",name:"receiveAToken",type:"bool"}],name:"liquidationCall",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"reserve",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"uint256",name:"rateMode",type:"uint256"},{internalType:"address",name:"onBehalfOf",type:"address"}],name:"repay",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"reserve",type:"address"},{internalType:"bool",name:"useAsCollateral",type:"bool"}],name:"setUserUseReserveAsCollateral",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"reserve",type:"address"},{internalType:"uint256",name:"rateMode",type:"uint256"}],name:"swapBorrowRateMode",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"reserve",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"address",name:"to",type:"address"}],name:"withdraw",outputs:[],stateMutability:"nonpayable",type:"function"}],je=function(){function e(){}return e.connect=function(e,t){return new a.Contract(e,Ke,t)},e}(),Ke=[{inputs:[],name:"LEND",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"amount",type:"uint256"}],name:"migrateFromLEND",outputs:[],stateMutability:"nonpayable",type:"function"}],Ye=function(){function e(){}return e.connect=function(e,t){return new a.Contract(e,Xe,t)},e}(),Xe=[{inputs:[],name:"isEthRequired",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"address",name:"_token",type:"address"},{internalType:"uint256",name:"_amount",type:"uint256"}],name:"mint",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"payable",type:"function"}],Qe=function(){function e(){}return e.connect=function(e,t){return new a.Contract(e,ze,t)},e}(),ze=[{inputs:[{internalType:"address",name:"collateralAsset",type:"address"},{internalType:"address",name:"debtAsset",type:"address"},{internalType:"uint256",name:"collateralAmount",type:"uint256"},{internalType:"uint256",name:"debtRepayAmount",type:"uint256"},{internalType:"uint256",name:"debtRateMode",type:"uint256"},{components:[{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"uint256",name:"deadline",type:"uint256"},{internalType:"uint8",name:"v",type:"uint8"},{internalType:"bytes32",name:"r",type:"bytes32"},{internalType:"bytes32",name:"s",type:"bytes32"}],internalType:"struct IRepayWithCollateral.PermitSignature",name:"permitSignature",type:"tuple"},{internalType:"bool",name:"useEthPath",type:"bool"}],name:"swapAndRepay",outputs:[],stateMutability:"nonpayable",type:"function"}],Je=function(){function e(){}return e.connect=function(e,t){return new a.Contract(e,Ze,t)},e}(),Ze=[{inputs:[],name:"REWARD_TOKEN",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"STAKED_TOKEN",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"claimRewards",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"cooldown",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"redeem",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"onBehalfOf",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"stake",outputs:[],stateMutability:"nonpayable",type:"function"}],$e=function(){function e(){}return e.connect=function(e,t){return new a.Contract(e,et,t)},e}(),et=[{inputs:[{internalType:"address",name:"assetToSwapFrom",type:"address"},{internalType:"address",name:"assetToSwapTo",type:"address"},{internalType:"uint256",name:"amountToSwap",type:"uint256"},{internalType:"uint256",name:"minAmountToReceive",type:"uint256"},{internalType:"uint256",name:"swapAllBalanceOffset",type:"uint256"},{internalType:"bytes",name:"swapCalldata",type:"bytes"},{internalType:"address",name:"augustus",type:"address"},{components:[{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"uint256",name:"deadline",type:"uint256"},{internalType:"uint8",name:"v",type:"uint8"},{internalType:"bytes32",name:"r",type:"bytes32"},{internalType:"bytes32",name:"s",type:"bytes32"}],internalType:"struct IParaSwapLiquiditySwapAdapter.PermitSignature",name:"permitParams",type:"tuple"}],name:"swapAndDeposit",outputs:[],stateMutability:"nonpayable",type:"function"}],tt=function(){function e(){}return e.connect=function(e,t){return new a.Contract(e,nt,t)},e}(),nt=[{inputs:[{internalType:"address",name:"account",type:"address"}],name:"transferableSynthetix",outputs:[{internalType:"uint256",name:"transferable",type:"uint256"}],stateMutability:"view",type:"function"}],rt=function(){function e(){}return e.connect=function(e,t){return new a.Contract(e,at,t)},e}(),at=[{inputs:[{internalType:"address",name:"lendingPool",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"uint256",name:"interesRateMode",type:"uint256"},{internalType:"uint16",name:"referralCode",type:"uint16"}],name:"borrowETH",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"lendingPool",type:"address"},{internalType:"address",name:"onBehalfOf",type:"address"},{internalType:"uint16",name:"referralCode",type:"uint16"}],name:"depositETH",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"address",name:"lendingPool",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"uint256",name:"rateMode",type:"uint256"},{internalType:"address",name:"onBehalfOf",type:"address"}],name:"repayETH",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"address",name:"lendingPool",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"address",name:"onBehalfOf",type:"address"}],name:"withdrawETH",outputs:[],stateMutability:"nonpayable",type:"function"}],it=function(e,t){return new n(e).multipliedBy(new n(10).pow(t)).toFixed(0)},ot=function(e,t){return e.toLowerCase()===xe.toLowerCase()?t:he},st={AAVE:it("100",18),BAT:it("100000",18),BUSD:it("10000",18),DAI:it("10000",18),ENJ:it("100000",18),KNC:it("10000",18),LEND:it("1000",18),LINK:it("1000",18),MANA:it("100000",18),MKR:it("10",18),WETH:it("10",18),REN:it("10000",18),REP:it("1000",18),SNX:it("100",18),SUSD:it("10000",18),TUSD:"0",UNI:it("1000",18),USDC:it("10000",6),USDT:it("10000",6),WBTC:it("1",8),YFI:it("1",18),ZRX:it("100000",18),UNIUSDC:it("0.1",6),UNIDAI:it("0.1",18),UNIUSDT:it("0.1",6),UNIDAIETH:it("0.1",18),UNIUSDCETH:it("0.1",18),UNISETHETH:it("0.1",18),UNILENDETH:it("0.1",18),UNILINKETH:it("0.1",18),UNIMKRETH:it("0.1",18)},ut=function(e){return e.toLowerCase().endsWith(".eth")},pt=Symbol("ethAddress"),lt=Symbol("ethOrENSAddress"),dt=Symbol("isPositive"),ct=Symbol("isPositiveOrMinusOne"),yt=Symbol("is0OrPositiveMetadataKey"),mt=Symbol("Optional");function ft(e){return function(t,n,r){var a=Reflect.getOwnMetadata(pt,t,n)||[];a.push({index:r,field:e}),Reflect.defineMetadata(pt,a,t,n)}}function Tt(e){return function(t,n,r){var a=Reflect.getOwnMetadata(lt,t,n)||[];a.push({index:r,field:e}),Reflect.defineMetadata(lt,a,t,n)}}function gt(e){return function(t,n,r){var a=Reflect.getOwnMetadata(dt,t,n)||[];a.push({index:r,field:e}),Reflect.defineMetadata(dt,a,t,n)}}function vt(e){return function(t,n,r){var a=Reflect.getOwnMetadata(yt,t,n)||[];a.push({index:r,field:e}),Reflect.defineMetadata(yt,a,t,n)}}function ht(e){return function(t,n,r){var a=Reflect.getOwnMetadata(ct,t,n)||[];a.push({index:r,field:e}),Reflect.defineMetadata(ct,a,t,n)}}function _t(e,t,n){var r=Reflect.getOwnMetadata(mt,e,t),a=[];return r&&r.forEach((function(e){null==n[e]&&(a[e]=!0)})),a}function bt(e,t,n,r){var i=Reflect.getOwnMetadata(pt,e,t);i&&i.forEach((function(e){if(e.field){if(n[0][e.field]&&!a.utils.isAddress(n[0][e.field]))throw new Error("Address: "+n[0][e.field]+" is not a valid ethereum Address")}else if(n[e.index]&&(!r||!r[e.index])&&!a.utils.isAddress(n[e.index]))throw new Error("Address: "+n[e.index]+" is not a valid ethereum Address")}))}function xt(e,t,n,r){var i=Reflect.getOwnMetadata(lt,e,t);i&&i.forEach((function(e){if(e.field){if(n[0][e.field]&&!a.utils.isAddress(n[0][e.field])&&!ut(n[0][e.field]))throw new Error("Address "+n[0][e.field]+" is not valid ENS format or a valid ethereum Address")}else if(n[e.index]&&(!r||!r[e.index])&&!a.utils.isAddress(n[e.index])&&!ut(n[e.index]))throw new Error("Address "+n[e.index]+" is not valid ENS format or a valid ethereum Address")}))}function wt(e,t,n,r){var a=Reflect.getOwnMetadata(dt,e,t);a&&a.forEach((function(e){if(e.field){if(n[0][e.field]&&!(Number(n[0][e.field])>0))throw new Error("Amount: "+n[0][e.field]+" needs to be greater than 0")}else if(!(r&&r[e.index]||Number(n[e.index])>0))throw new Error("Amount: "+n[e.index]+" needs to be greater than 0")}))}function At(e,t,n,r){var a=Reflect.getOwnMetadata(yt,e,t);a&&a.forEach((function(e){if(e.field){if(n[0][e.field]&&!(Number(n[0][e.field])>=0))throw new Error("Amount: "+n[0][e.field]+" needs to be greater than 0")}else if(!(r&&r[e.index]||Number(n[e.index])>=0))throw new Error("Amount: "+n[e.index]+" needs to be greater than 0")}))}function Et(e,t,n,r){var a=Reflect.getOwnMetadata(ct,e,t);a&&a.forEach((function(e){if(e.field){if(n[0][e.field]&&!(Number(n[0][e.field])>0||"-1"===n[0][e.field]))throw new Error("Amount: "+n[0][e.field]+" needs to be greater than 0 or -1")}else if(!(r&&r[e.index]||Number(n[e.index])>0||"-1"===n[e.index]))throw new Error("Amount: "+n[e.index]+" needs to be greater than 0 or -1")}))}function Ct(e,t,n){var r=n.value;n.value=function(){var n=this.lendingPoolConfig||{},i=n.LENDING_POOL;return a.utils.isAddress(i)?(bt(e,t,arguments),wt(e,t,arguments),Et(e,t,arguments),null==r?void 0:r.apply(this,arguments)):(console.error("[LendingPoolValidator] You need to pass valid addresses"),[])}}function St(e,t,n){var r=n.value;n.value=function(){var n=this.stakingConfig||{},i=n.TOKEN_STAKING,o=n.STAKING_REWARD_TOKEN;if(!a.utils.isAddress(i)||!a.utils.isAddress(o))return console.error("[StakingValidator] You need to pass valid addresses"),[];var s=_t(e,t,arguments);return bt(e,t,arguments,s),wt(e,t,arguments,s),null==r?void 0:r.apply(this,arguments)}}function Bt(e,t,n){var r=n.value;n.value=function(){var n,i=(null==(n=this.wethGatewayConfig)?void 0:n.WETH_GATEWAY)||"";return a.utils.isAddress(i)?(bt(e,t,arguments),wt(e,t,arguments),Et(e,t,arguments),null==r?void 0:r.apply(this,arguments)):(console.error("[WethGatewayValidator] You need to pass valid addresses"),[])}}function Pt(e,t,n){var r=n.value;n.value=function(){var n=this.governanceConfig||{},i=n.AAVE_GOVERNANCE_V2,o=n.AAVE_GOVERNANCE_V2_HELPER,s=n.AAVE_GOVERNANCE_V2_EXECUTOR_SHORT,u=n.AAVE_GOVERNANCE_V2_EXECUTOR_LONG;return a.utils.isAddress(i)&&a.utils.isAddress(o)&&a.utils.isAddress(s)&&a.utils.isAddress(u)?(bt(e,t,arguments),At(e,t,arguments),null==r?void 0:r.apply(this,arguments)):(console.error("[GovernanceValidator] You need to pass valid addresses"),[])}}function Dt(e,t,n){var r=n.value;n.value=function(){return bt(e,t,arguments),xt(e,t,arguments),wt(e,t,arguments),At(e,t,arguments),null==r?void 0:r.apply(this,arguments)}}var Rt=function(){var e=u(ve.mark((function e(t,n,r){var a;return ve.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.provider.estimateGas(t);case 2:if(a=e.sent,n.network!==exports.Network.polygon){e.next=6;break}return e.abrupt("return",a.add(a.mul(60).div(100)));case 6:return e.abrupt("return",a.add(a.mul(r||30).div(100)));case 7:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),kt=function(){var e=u(ve.mark((function e(t){return ve.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.provider.getGasPrice();case 2:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ot=function(e,t){var n=this;this.getContractInstance=function(e){return n.contractInstances[e]||(n.contractInstances[e]=n.contractFactory.connect(e,n.config.provider)),n.contractInstances[e]},this.generateTxCallback=function(e){var t=e.rawTxMethod,r=e.from,i=e.value,o=e.gasSurplus,s=e.action;return u(ve.mark((function e(){var u;return ve.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t();case 2:return u=p({},e.sent,{from:r,value:i||he}),e.next=6,Rt(u,n.config,o);case 6:return u.gasLimit=e.sent,s&&we[s]&&u.gasLimit.lte(a.BigNumber.from(we[s].limit))&&(u.gasLimit=a.BigNumber.from(we[s].recommended)),e.abrupt("return",u);case 9:case"end":return e.stop()}}),e)})))},this.generateTxPriceEstimation=function(e,t,r){return void 0===r&&(r=exports.ProtocolAction.default),function(){var a=u(ve.mark((function a(i){var o,s,u,p;return ve.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return void 0===i&&(i=!1),a.prev=1,a.next=4,kt(n.config);case 4:if(o=a.sent,e.find((function(e){return e.txType===exports.eEthereumTxType.ERC20_APPROVAL}))&&!i){a.next=15;break}return a.next=9,t();case 9:if(p=(s=a.sent).gasPrice,u=s.gasLimit){a.next=14;break}throw new Error("Transaction calculation error");case 14:return a.abrupt("return",{gasLimit:u.toString(),gasPrice:p?p.toString():o.toString()});case 15:return a.abrupt("return",{gasLimit:we[r].recommended,gasPrice:o.toString()});case 18:return a.prev=18,a.t0=a.catch(1),console.error("Calculate error on calculate estimation gas price.",a.t0),a.abrupt("return",null);case 22:case"end":return a.stop()}}),a,null,[[1,18]])})));return function(e){return a.apply(this,arguments)}}()},this.config=e,this.contractFactory=t,this.contractInstances={}};function It(e){switch(e.slice(0,10)){case"0xda8567c8":return 100;case"0x58b9d179":return 4;case"0x0863b7ac":case"0x8f00eccb":case"0xec1d21dd":return 68;case"0x54840d1a":return 4;case"0xf5661034":case"0x64466805":case"0xa94e78ef":case"0x46c67b6d":return 68;default:throw new Error("Unrecognized function selector for Augustus")}}var Nt=function(e){function t(t,n){var r,a;return(a=e.call(this,t,$e)||this).swapCollateralConfig=n,a.liquiditySwapAdapterAddress=(null==(r=a.swapCollateralConfig)?void 0:r.SWAP_COLLATERAL_ADAPTER)||"",a}return l(t,e),t.prototype.swapAndDeposit=function(e,t){var n=e.user,r=e.assetToSwapFrom,a=e.assetToSwapTo,i=e.amountToSwap,o=e.minAmountToReceive,s=e.permitParams,u=e.augustus,p=e.swapCallData,l=e.swapAll,d=this.getContractInstance(this.liquiditySwapAdapterAddress),c=this.generateTxCallback({rawTxMethod:function(){return d.populateTransaction.swapAndDeposit(r,a,i,o,l?It(p):0,p,u,s)},from:n});return{tx:c,txType:exports.eEthereumTxType.DLP_ACTION,gas:this.generateTxPriceEstimation(t||[],c,exports.ProtocolAction.swapCollateral)}},t}(Ot);r.__decorate([function(e,t,n){var r=n.value;n.value=function(){var n=this.swapCollateralConfig.SWAP_COLLATERAL_ADAPTER||"";return a.utils.isAddress(n)?(bt(e,t,arguments),wt(e,t,arguments),Et(e,t,arguments),null==r?void 0:r.apply(this,arguments)):(console.error("[LiquiditySwapValidator] You need to pass valid addresses"),[])}},r.__param(0,ft("user")),r.__param(0,ft("assetToSwapFrom")),r.__param(0,ft("assetToSwapTo")),r.__param(0,ft("augustus")),r.__param(0,gt("amountToSwap")),r.__param(0,gt("minAmountToReceive")),r.__metadata("design:type",Function),r.__metadata("design:paramtypes",[Object,Array]),r.__metadata("design:returntype",Object)],Nt.prototype,"swapAndDeposit",null);var Lt=function(e,t,n,r,i,o,s,u,p,l){return a.utils.defaultAbiCoder.encode(["address","uint256","uint256","bytes","address","tuple(uint256,uint256,uint8,bytes32,bytes32)"],[e,t,n,r,i,[o,s,u,p,l]])},Vt=function(e){function t(t,n,r,a,i,o,s,u){var p;(p=e.call(this,t,qe)||this).erc20Service=n,p.synthetixService=r,p.wethGatewayService=a,p.liquiditySwapAdapterService=i,p.repayWithCollateralAdapterService=o,p.market=s,p.lendingPoolConfig=u;var l=p.lendingPoolConfig||{},d=l.FLASH_LIQUIDATION_ADAPTER,c=l.REPAY_WITH_COLLATERAL_ADAPTER,y=l.SWAP_COLLATERAL_ADAPTER;return p.lendingPoolAddress=l.LENDING_POOL||"",p.flashLiquidationAddress=d||"",p.swapCollateralAddress=y||"",p.repayWithCollateralAddress=c||"",p}l(t,e);var n=t.prototype;return n.deposit=function(){var e=u(ve.mark((function e(t){var n,r,a,i,o,s,u,p,l,d,c,y,m,f;return ve.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.user,a=t.amount,i=t.onBehalfOf,o=t.referralCode,(r=t.reserve).toLowerCase()!==xe.toLowerCase()){e.next=3;break}return e.abrupt("return",this.wethGatewayService.depositETH({lendingPool:this.lendingPoolAddress,user:n,amount:a,onBehalfOf:i,referralCode:o}));case 3:return u=(s=this.erc20Service).isApproved,p=s.approve,l=s.decimalsOf,d=[],e.next=7,l(r);case 7:return c=it(a,e.sent),e.next=11,this.synthetixService.synthetixValidation(n,r,c);case 11:if(e.sent){e.next=14;break}throw new Error("Not enough funds to execute operation");case 14:return e.next=16,u(r,n,this.lendingPoolAddress,a);case 16:return e.sent||(y=p(n,r,this.lendingPoolAddress,_e),d.push(y)),m=this.getContractInstance(this.lendingPoolAddress),f=this.generateTxCallback({rawTxMethod:function(){return m.populateTransaction.deposit(r,c,i||n,o||"0")},from:n,value:ot(r,c)}),d.push({tx:f,txType:exports.eEthereumTxType.DLP_ACTION,gas:this.generateTxPriceEstimation(d,f,exports.ProtocolAction.deposit)}),e.abrupt("return",d);case 22:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.withdraw=function(){var e=u(ve.mark((function e(t){var n,r,i,o,s,u,p,l,d,c;return ve.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.user,i=t.amount,o=t.onBehalfOf,s=t.aTokenAddress,(r=t.reserve).toLowerCase()!==xe.toLowerCase()){e.next=5;break}if(s){e.next=4;break}throw new Error("To withdraw ETH you need to pass the aWETH token address");case 4:return e.abrupt("return",this.wethGatewayService.withdrawETH({lendingPool:this.lendingPoolAddress,user:n,amount:i,onBehalfOf:o,aTokenAddress:s}));case 5:return u=this.erc20Service.decimalsOf,e.next=8,u(r);case 8:return p=e.sent,l="-1"===i?a.constants.MaxUint256.toString():it(i,p),d=this.getContractInstance(this.lendingPoolAddress),c=this.generateTxCallback({rawTxMethod:function(){return d.populateTransaction.withdraw(r,l,o||n)},from:n,action:exports.ProtocolAction.withdraw}),e.abrupt("return",[{tx:c,txType:exports.eEthereumTxType.DLP_ACTION,gas:this.generateTxPriceEstimation([],c,exports.ProtocolAction.withdraw)}]);case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.borrow=function(){var e=u(ve.mark((function e(t){var n,r,a,i,o,s,u,p,l,d,c,y;return ve.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.user,a=t.amount,i=t.interestRateMode,o=t.debtTokenAddress,s=t.onBehalfOf,u=t.referralCode,(r=t.reserve).toLowerCase()!==xe.toLowerCase()){e.next=5;break}if(o){e.next=4;break}throw new Error("To borrow ETH you need to pass the stable or variable WETH debt Token Address corresponding the interestRateMode");case 4:return e.abrupt("return",this.wethGatewayService.borrowETH({lendingPool:this.lendingPoolAddress,user:n,amount:a,debtTokenAddress:o,interestRateMode:i,referralCode:u}));case 5:return p=this.erc20Service.decimalsOf,e.next=8,p(r);case 8:return l=it(a,e.sent),d=i===exports.InterestRate.Variable?2:1,c=this.getContractInstance(this.lendingPoolAddress),y=this.generateTxCallback({rawTxMethod:function(){return c.populateTransaction.borrow(r,l,d,u||0,s||n)},from:n}),e.abrupt("return",[{tx:y,txType:exports.eEthereumTxType.DLP_ACTION,gas:this.generateTxPriceEstimation([],y)}]);case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.repay=function(){var e=u(ve.mark((function e(t){var n,r,i,o,s,u,p,l,d,c,y,m,f,T,g,v,h;return ve.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.user,i=t.amount,o=t.interestRateMode,s=t.onBehalfOf,(r=t.reserve).toLowerCase()!==xe.toLowerCase()){e.next=3;break}return e.abrupt("return",this.wethGatewayService.repayETH({lendingPool:this.lendingPoolAddress,user:n,amount:i,interestRateMode:o,onBehalfOf:s}));case 3:return u=[],l=(p=this.erc20Service).isApproved,d=p.approve,c=p.decimalsOf,y=this.getContractInstance(this.lendingPoolAddress),m=y.populateTransaction,f=o===exports.InterestRate.Variable?2:1,e.next=10,c(r);case 10:if(T=e.sent,g="-1"===i?a.constants.MaxUint256.toString():it(i,T),"-1"===i){e.next=18;break}return e.next=15,this.synthetixService.synthetixValidation(n,r,g);case 15:if(e.sent){e.next=18;break}throw new Error("Not enough funds to execute operation");case 18:return e.next=20,l(r,n,this.lendingPoolAddress,i);case 20:return e.sent||(v=d(n,r,this.lendingPoolAddress,_e),u.push(v)),h=this.generateTxCallback({rawTxMethod:function(){return m.repay(r,g,f,s||n)},from:n,value:ot(r,g)}),u.push({tx:h,txType:exports.eEthereumTxType.DLP_ACTION,gas:this.generateTxPriceEstimation(u,h,exports.ProtocolAction.repay)}),e.abrupt("return",u);case 25:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.swapBorrowRateMode=function(){var e=u(ve.mark((function e(t){var n,r,a,i,o;return ve.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.user,r=t.reserve,a=t.interestRateMode===exports.InterestRate.Variable?2:1,i=this.getContractInstance(this.lendingPoolAddress),o=this.generateTxCallback({rawTxMethod:function(){return i.populateTransaction.swapBorrowRateMode(r,a)},from:n}),e.abrupt("return",[{txType:exports.eEthereumTxType.DLP_ACTION,tx:o,gas:this.generateTxPriceEstimation([],o)}]);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.setUsageAsCollateral=function(){var e=u(ve.mark((function e(t){var n,r,a,i,o;return ve.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.user,r=t.reserve,a=t.usageAsCollateral,i=this.getContractInstance(this.lendingPoolAddress),o=this.generateTxCallback({rawTxMethod:function(){return i.populateTransaction.setUserUseReserveAsCollateral(r,a)},from:n}),e.abrupt("return",[{tx:o,txType:exports.eEthereumTxType.DLP_ACTION,gas:this.generateTxPriceEstimation([],o)}]);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.liquidationCall=function(){var e=u(ve.mark((function e(t){var n,r,a,i,o,s,u,p,l,d,c,y,m,f,T,g,v;return ve.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.liquidator,r=t.liquidatedUser,a=t.debtReserve,i=t.collateralReserve,o=t.purchaseAmount,s=t.getAToken,u=t.liquidateAll,p=[],d=(l=this.erc20Service).isApproved,c=l.approve,y=l.getTokenData,e.next=5,d(a,n,this.lendingPoolAddress,o);case 5:return e.sent||(m=c(n,a,this.lendingPoolAddress,_e),p.push(m)),e.next=9,Promise.all([y(a)]);case 9:return f=e.sent[0].decimals,T=u?be:it(o,f),g=this.getContractInstance(this.lendingPoolAddress),v=this.generateTxCallback({rawTxMethod:function(){return g.populateTransaction.liquidationCall(i,a,r,T,s||!1)},from:n,value:ot(a,T)}),p.push({tx:v,txType:exports.eEthereumTxType.DLP_ACTION,gas:this.generateTxPriceEstimation(p,v,exports.ProtocolAction.liquidationCall)}),e.abrupt("return",p);case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.swapCollateral=function(){var e=u(ve.mark((function e(t){var n,r,i,o,s,u,p,l,d,c,y,m,f,T,g,v,h,_,b,x,w,A,E,C=this;return ve.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.user,r=t.flash,i=t.fromAsset,o=t.fromAToken,s=t.toAsset,u=t.fromAmount,p=t.minToAmount,l=t.swapAll,d=t.onBehalfOf,c=t.referralCode,y=t.augustus,m=t.swapCallData,f=[],T=t.permitSignature||{amount:"0",deadline:"0",v:0,r:"0x0000000000000000000000000000000000000000000000000000000000000000",s:"0x0000000000000000000000000000000000000000000000000000000000000000"},e.next=5,this.erc20Service.isApproved(o,n,this.swapCollateralAddress,u);case 5:return e.sent||(g=this.erc20Service.approve(n,o,this.swapCollateralAddress,a.constants.MaxUint256.toString()),f.push(g)),e.next=9,this.erc20Service.decimalsOf(i);case 9:return h=it(u,v=e.sent),e.next=13,this.erc20Service.decimalsOf(s);case 13:if(_=it(p,e.sent),b=this.getContractInstance(this.lendingPoolAddress),x=Lt(s,_,l?It(m):0,m,y,T.amount,T.deadline,T.v,T.r,T.s),!r){e.next=23;break}return w=(Number(u)+Number(u)*Number("0.05")/100).toString(),A=it(w,v),E=this.generateTxCallback({rawTxMethod:function(){return b.populateTransaction.flashLoan(C.swapCollateralAddress,[i],l?[A]:[h],[0],d||n,x,c||"0")},from:n}),f.push({tx:E,txType:exports.eEthereumTxType.DLP_ACTION,gas:this.generateTxPriceEstimation(f,E,exports.ProtocolAction.swapCollateral)}),e.abrupt("return",f);case 23:return e.next=25,this.liquiditySwapAdapterService.swapAndDeposit({user:n,assetToSwapFrom:i,assetToSwapTo:s,amountToSwap:h,minAmountToReceive:_,swapAll:l,swapCallData:m,augustus:y,permitParams:T},f);case 25:return f.push(e.sent),e.abrupt("return",f);case 28:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.repayWithCollateral=function(){var e=u(ve.mark((function e(t){var n,r,i,o,s,u,p,l,d,c,y,m,f,T,g,v,h,_,b,x,w,A,E,C=this;return ve.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.user,r=t.fromAsset,i=t.fromAToken,o=t.assetToRepay,s=t.repayWithAmount,u=t.repayAmount,p=t.repayAllDebt,l=t.rateMode,d=t.onBehalfOf,c=t.referralCode,y=t.flash,m=t.useEthPath,f=[],T=t.permitSignature||{amount:"0",deadline:"0",v:0,r:"0x0000000000000000000000000000000000000000000000000000000000000000",s:"0x0000000000000000000000000000000000000000000000000000000000000000"},e.next=5,this.erc20Service.isApproved(i,n,this.repayWithCollateralAddress,s);case 5:return e.sent||(g=this.erc20Service.approve(n,i,this.repayWithCollateralAddress,a.constants.MaxUint256.toString()),f.push(g)),e.next=9,this.erc20Service.decimalsOf(r);case 9:return v=it(s,e.sent),h=(Number(u)+Number(u)*Number("0.05")/100).toString(),e.next=14,this.erc20Service.decimalsOf(o);case 14:if(_=it(p?h:u,e.sent),b=0,l&&(b=l===exports.InterestRate.Stable?1:2),!y){e.next=24;break}return x=a.utils.defaultAbiCoder.encode(["address","uint256","uint256","uint256","uint256","uint8","bytes32","bytes32","bool"],[r,v,b,T.amount,T.deadline,T.v,T.r,T.s,m||!1]),w=this.getContractInstance(this.lendingPoolAddress),A=this.generateTxCallback({rawTxMethod:function(){return w.populateTransaction.flashLoan(C.repayWithCollateralAddress,[o],[_],[0],d||n,x,c||"0")},from:n}),f.push({tx:A,txType:exports.eEthereumTxType.DLP_ACTION,gas:this.generateTxPriceEstimation(f,A,exports.ProtocolAction.repayCollateral)}),e.abrupt("return",f);case 24:return E=this.repayWithCollateralAdapterService.swapAndRepay({user:n,collateralAsset:r,debtAsset:o,collateralAmount:v,debtRepayAmount:_,debtRateMode:b,permit:T,useEthPath:m},f),f.push(E),e.abrupt("return",f);case 27:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.flashLiquidation=function(){var e=u(ve.mark((function e(t){var n,r,i,o,s,u,p,l,d,c,y,m,f,T,g,v,h=this;return ve.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.user,r=t.collateralAsset,i=t.borrowedAsset,o=t.debtTokenCover,s=t.liquidateAll,u=t.initiator,p=t.useEthPath,l=function(e){return(Number(e)+Number(e)*Number(e)/100).toString()},d=[],c=this.getContractInstance(this.lendingPoolAddress),e.next=6,this.erc20Service.decimalsOf(i);case 6:return m=it(o,y=e.sent),f=s?a.constants.MaxUint256.toString():m,T=s?it(l(o),y):m,g=a.utils.defaultAbiCoder.encode(["address","address","address","uint256","bool"],[r,i,n,f,p||!1]),v=this.generateTxCallback({rawTxMethod:function(){return c.populateTransaction.flashLoan(h.flashLiquidationAddress,[i],[T],[0],u,g,"0")},from:u}),d.push({tx:v,txType:exports.eEthereumTxType.DLP_ACTION,gas:this.generateTxPriceEstimation(d,v,exports.ProtocolAction.liquidationFlash)}),e.abrupt("return",d);case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),t}(Ot);r.__decorate([Ct,r.__param(0,ft("user")),r.__param(0,ft("reserve")),r.__param(0,gt("amount")),r.__param(0,ft("onBehalfOf")),r.__metadata("design:type",Function),r.__metadata("design:paramtypes",[Object]),r.__metadata("design:returntype",Promise)],Vt.prototype,"deposit",null),r.__decorate([Ct,r.__param(0,ft("user")),r.__param(0,ft("reserve")),r.__param(0,ht("amount")),r.__param(0,ft("onBehalfOf")),r.__param(0,ft("aTokenAddress")),r.__metadata("design:type",Function),r.__metadata("design:paramtypes",[Object]),r.__metadata("design:returntype",Promise)],Vt.prototype,"withdraw",null),r.__decorate([Ct,r.__param(0,ft("user")),r.__param(0,ft("reserve")),r.__param(0,gt("amount")),r.__param(0,ft("debtTokenAddress")),r.__param(0,ft("onBehalfOf")),r.__metadata("design:type",Function),r.__metadata("design:paramtypes",[Object]),r.__metadata("design:returntype",Promise)],Vt.prototype,"borrow",null),r.__decorate([Ct,r.__param(0,ft("user")),r.__param(0,ft("reserve")),r.__param(0,ht("amount")),r.__param(0,ft("onBehalfOf")),r.__metadata("design:type",Function),r.__metadata("design:paramtypes",[Object]),r.__metadata("design:returntype",Promise)],Vt.prototype,"repay",null),r.__decorate([Ct,r.__param(0,ft("user")),r.__param(0,ft("reserve")),r.__metadata("design:type",Function),r.__metadata("design:paramtypes",[Object]),r.__metadata("design:returntype",Promise)],Vt.prototype,"swapBorrowRateMode",null),r.__decorate([Ct,r.__param(0,ft("user")),r.__param(0,ft("reserve")),r.__metadata("design:type",Function),r.__metadata("design:paramtypes",[Object]),r.__metadata("design:returntype",Promise)],Vt.prototype,"setUsageAsCollateral",null),r.__decorate([Ct,r.__param(0,ft("liquidator")),r.__param(0,ft("liquidatedUser")),r.__param(0,ft("debtReserve")),r.__param(0,ft("collateralReserve")),r.__param(0,gt("purchaseAmount")),r.__metadata("design:type",Function),r.__metadata("design:paramtypes",[Object]),r.__metadata("design:returntype",Promise)],Vt.prototype,"liquidationCall",null),r.__decorate([function(e,t,n){var r=n.value;n.value=function(){var n=this.lendingPoolConfig||{},i=n.LENDING_POOL,o=n.SWAP_COLLATERAL_ADAPTER;return a.utils.isAddress(i)&&o&&a.utils.isAddress(o)?(bt(e,t,arguments),wt(e,t,arguments),Et(e,t,arguments),null==r?void 0:r.apply(this,arguments)):(console.error("[LPSwapCollateralValidator] You need to pass valid addresses"),[])}},r.__param(0,ft("user")),r.__param(0,ft("fromAsset")),r.__param(0,ft("fromAToken")),r.__param(0,ft("toAsset")),r.__param(0,ft("onBehalfOf")),r.__param(0,ft("augustus")),r.__param(0,gt("fromAmount")),r.__param(0,gt("minToAmount")),r.__metadata("design:type",Function),r.__metadata("design:paramtypes",[Object]),r.__metadata("design:returntype",Promise)],Vt.prototype,"swapCollateral",null),r.__decorate([function(e,t,n){var r=n.value;n.value=function(){var n=this.lendingPoolConfig||{},i=n.LENDING_POOL,o=n.REPAY_WITH_COLLATERAL_ADAPTER;return a.utils.isAddress(i)&&o&&a.utils.isAddress(o)?(bt(e,t,arguments),wt(e,t,arguments),Et(e,t,arguments),null==r?void 0:r.apply(this,arguments)):(console.error("[LPRepayWithCollateralValidator] You need to pass valid addresses"),[])}},r.__param(0,ft("user")),r.__param(0,ft("fromAsset")),r.__param(0,ft("fromAToken")),r.__param(0,ft("assetToRepay")),r.__param(0,ft("onBehalfOf")),r.__param(0,gt("repayWithAmount")),r.__param(0,gt("repayAmount")),r.__metadata("design:type",Function),r.__metadata("design:paramtypes",[Object]),r.__metadata("design:returntype",Promise)],Vt.prototype,"repayWithCollateral",null),r.__decorate([function(e,t,n){var r=n.value;n.value=function(){var n=this.lendingPoolConfig||{},i=n.LENDING_POOL,o=n.FLASH_LIQUIDATION_ADAPTER;return a.utils.isAddress(i)&&o&&a.utils.isAddress(o)?(bt(e,t,arguments),wt(e,t,arguments),Et(e,t,arguments),null==r?void 0:r.apply(this,arguments)):(console.error("[LPFlahsLiquidationValidator] You need to pass valid addresses"),[])}},r.__param(0,ft("user")),r.__param(0,ft("collateralAsset")),r.__param(0,ft("borrowedAsset")),r.__param(0,gt("debtTokenCover")),r.__param(0,ft("initiator")),r.__metadata("design:type",Function),r.__metadata("design:paramtypes",[Object]),r.__metadata("design:returntype",Promise)],Vt.prototype,"flashLiquidation",null);var Mt=function(e){function t(t){var n;return(n=e.call(this,t,Oe)||this).approve=function(e,t,r,a){var i=n.getContractInstance(t),o=n.generateTxCallback({rawTxMethod:function(){return i.populateTransaction.approve(r,a)},from:e});return{tx:o,txType:exports.eEthereumTxType.ERC20_APPROVAL,gas:n.generateTxPriceEstimation([],o)}},n.isApproved=function(){var e=u(ve.mark((function e(t,r,i,o){var s,u,p,l;return ve.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.toLowerCase()!==xe.toLowerCase()){e.next=2;break}return e.abrupt("return",!0);case 2:return e.next=4,n.decimalsOf(t);case 4:return s=e.sent,u=n.getContractInstance(t),e.next=8,u.allowance(r,i);case 8:return p=e.sent,l=a.BigNumber.from("-1"===o?"11579208923731619542357098500868790785326998466564056403945758400791":it(o,s)),e.abrupt("return",p.gte(l));case 11:case"end":return e.stop()}}),e)})));return function(t,n,r,a){return e.apply(this,arguments)}}(),n.decimalsOf=function(){var e=u(ve.mark((function e(t){var r;return ve.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.toLowerCase()!==xe.toLowerCase()){e.next=2;break}return e.abrupt("return",18);case 2:if(n.tokenDecimals[t]){e.next=7;break}return r=n.getContractInstance(t),e.next=6,r.decimals();case 6:n.tokenDecimals[t]=e.sent;case 7:return e.abrupt("return",n.tokenDecimals[t]);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.getTokenData=function(){var e=u(ve.mark((function e(t){var r,a,i,o,s;return ve.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.toLowerCase()!==xe.toLowerCase()){e.next=2;break}return e.abrupt("return",{name:"Ethereum",symbol:"ETH",decimals:18,address:t});case 2:if(t.toLowerCase()!=="0x9f8f72aa9304c8b593d555f12ef6589cc3a579a2".toLowerCase()){e.next=4;break}return e.abrupt("return",{name:"Maker",symbol:"MKR",decimals:18,address:t});case 4:return r=n.getContractInstance(t),a=r.name,i=r.symbol,o=r.decimals,e.next=7,Promise.all([a(),i(),o()]);case 7:return e.abrupt("return",{name:(s=e.sent)[0],symbol:s[1],decimals:s[2],address:t});case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.tokenDecimals={},n}return l(t,e),t}(Ot),Ut=function(e){function t(t,n){var r,a;(a=e.call(this,t,Ye)||this).faucetConfig=n;var i=a.config.provider;return a.faucetAddress=(null==(r=a.faucetConfig)?void 0:r.FAUCET)||"",""!==a.faucetAddress&&(a.faucetContract=Ne.connect(a.faucetAddress,i)),a}return l(t,e),t.prototype.mint=function(){var e=u(ve.mark((function e(t){var n,r,a,i=this;return ve.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.reserve,r=st[t.tokenSymbol],a=this.generateTxCallback({rawTxMethod:function(){return i.faucetContract.populateTransaction.mint(n,r)},from:t.userAddress,value:he}),e.abrupt("return",[{tx:a,txType:exports.eEthereumTxType.FAUCET_MINT,gas:this.generateTxPriceEstimation([],a)}]);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),t}(Ot);r.__decorate([function(e,t,n){var r=n.value;n.value=function(){var n,i=null==(n=this.faucetConfig)?void 0:n.FAUCET;if(!i||i&&!a.utils.isAddress(i))return console.error("[FaucetValidator] You need to pass valid addresses"),[];var o=_t(e,t,arguments);return bt(e,t,arguments,o),wt(e,t,arguments,o),null==r?void 0:r.apply(this,arguments)}},r.__param(0,ft("userAddress")),r.__param(0,ft("reserve")),r.__metadata("design:type",Function),r.__metadata("design:paramtypes",[Object]),r.__metadata("design:returntype",Promise)],Ut.prototype,"mint",null);var Ht=function(e){function t(t,n,r){var a,i;return(i=e.call(this,t,je)||this).erc20Service=n,i.migratorConfig=r,i.migratorAddress=(null==(a=i.migratorConfig)?void 0:a.LEND_TO_AAVE_MIGRATOR)||"",i}return l(t,e),t.prototype.migrateLendToAave=function(){var e=u(ve.mark((function e(t,n){var r,a,i,o,s,u,p,l,d,c;return ve.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=[],i=(a=this.erc20Service).isApproved,o=a.approve,s=a.decimalsOf,u=this.getContractInstance(this.migratorAddress),e.next=5,u.LEND();case 5:return p=e.sent,e.next=8,i(p,t,this.migratorAddress,n);case 8:return e.sent||r.push(o(t,p,this.migratorAddress,_e)),e.next=12,s(p);case 12:return l=e.sent,e.next=15,it(n,l);case 15:return d=e.sent,c=this.generateTxCallback({rawTxMethod:function(){return u.populateTransaction.migrateFromLEND(d)},from:t}),r.push({txType:exports.eEthereumTxType.MIGRATION_LEND_AAVE,tx:c,gas:this.generateTxPriceEstimation(r,c)}),e.abrupt("return",r);case 19:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),t}(Ot);r.__decorate([function(e,t,n){var r=n.value;n.value=function(){var n,i=(null==(n=this.migratorConfig)?void 0:n.LEND_TO_AAVE_MIGRATOR)||"";return a.utils.isAddress(i)?(bt(e,t,arguments),wt(e,t,arguments),null==r?void 0:r.apply(this,arguments)):(console.error("[MigratorValidator] You need to pass valid addresses"),[])}},r.__param(0,ft()),r.__param(1,gt()),r.__metadata("design:type",Function),r.__metadata("design:paramtypes",[String,String]),r.__metadata("design:returntype",Promise)],Ht.prototype,"migrateLendToAave",null);var Ft=function(e){function t(t,n,r,a){var i;(i=e.call(this,t,Je)||this).stakingConfig=a,i.tokenStake=r,i.erc20Service=n;var o=i.config.provider,s=i.stakingConfig||{},u=s.STAKING_REWARD_TOKEN,p=s.STAKING_HELPER;return i.stakingContractAddress=s.TOKEN_STAKING||"",i.stakingRewardTokenContractAddress=u||"",i.stakingHelperContractAddress=p,i.stakingHelperContractAddress&&(i.stakingHelperContract=Pe.connect(i.stakingHelperContractAddress,o)),i}l(t,e);var n=t.prototype;return n.signStaking=function(){var e=u(ve.mark((function e(t,n,r){var i,o,s,u,p,l,d;return ve.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.stakingHelperContractAddress){e.next=2;break}return e.abrupt("return","");case 2:return i=this.erc20Service.getTokenData,o=this.getContractInstance(this.stakingContractAddress),e.next=6,o.STAKED_TOKEN();case 6:return s=e.sent,e.next=9,i(s);case 9:return p=(u=e.sent).name,l=it(n,u.decimals),d={types:{EIP712Domain:[{name:"name",type:"string"},{name:"version",type:"string"},{name:"chainId",type:"uint256"},{name:"verifyingContract",type:"address"}],Permit:[{name:"owner",type:"address"},{name:"spender",type:"address"},{name:"value",type:"uint256"},{name:"nonce",type:"uint256"},{name:"deadline",type:"uint256"}]},primaryType:"Permit",domain:{name:p,version:"1",chainId:exports.ChainId[this.config.network],verifyingContract:s},message:{owner:t,spender:this.stakingHelperContractAddress,value:l,nonce:r,deadline:a.constants.MaxUint256.toString()}},e.abrupt("return",JSON.stringify(d));case 15:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}(),n.stakeWithPermit=function(){var e=u(ve.mark((function e(t,n,r){var i,o,s,u,p,l,d,c=this;return ve.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.stakingHelperContractAddress){e.next=2;break}return e.abrupt("return",[]);case 2:return i=[],o=this.erc20Service.decimalsOf,s=this.getContractInstance(this.stakingContractAddress),e.next=7,s.STAKED_TOKEN();case 7:return u=e.sent,e.next=10,o(u);case 10:return p=it(n,e.sent),l=a.utils.splitSignature(r),d=this.generateTxCallback({rawTxMethod:function(){return c.stakingHelperContract.populateTransaction.stake(t,p,l.v,l.r,l.s)},from:t}),i.push({tx:d,txType:exports.eEthereumTxType.STAKE_ACTION,gas:this.generateTxPriceEstimation(i,d)}),e.abrupt("return",i);case 16:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}(),n.stake=function(){var e=u(ve.mark((function e(t,n,r){var a,i,o,s,u,p,l,d,c,y;return ve.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=[],o=(i=this.erc20Service).decimalsOf,s=i.isApproved,u=i.approve,p=this.getContractInstance(this.stakingContractAddress),e.next=5,p.STAKED_TOKEN();case 5:return l=e.sent,e.next=8,o(l);case 8:return d=it(n,e.sent),e.next=12,s(l,t,this.stakingContractAddress,n);case 12:return e.sent||(c=u(t,l,this.stakingContractAddress,_e),a.push(c)),y=this.generateTxCallback({rawTxMethod:function(){return p.populateTransaction.stake(r||t,d)},from:t}),a.push({tx:y,txType:exports.eEthereumTxType.STAKE_ACTION,gas:this.generateTxPriceEstimation(a,y)}),e.abrupt("return",a);case 17:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}(),n.redeem=function(){var e=u(ve.mark((function e(t,n){var r,a,i,o,s;return ve.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=this.getContractInstance(this.stakingContractAddress),"-1"!==n){e.next=5;break}r=be,e.next=13;break;case 5:return i=this.erc20Service.decimalsOf,e.next=8,a.STAKED_TOKEN();case 8:return o=e.sent,e.next=11,i(o);case 11:r=it(n,e.sent);case 13:return s=this.generateTxCallback({rawTxMethod:function(){return a.populateTransaction.redeem(t,r)},from:t,gasSurplus:20}),e.abrupt("return",[{tx:s,txType:exports.eEthereumTxType.STAKE_ACTION,gas:this.generateTxPriceEstimation([],s)}]);case 15:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),n.cooldown=function(){var e=u(ve.mark((function e(t){var n,r;return ve.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.getContractInstance(this.stakingContractAddress),r=this.generateTxCallback({rawTxMethod:function(){return n.populateTransaction.cooldown()},from:t}),e.abrupt("return",[{tx:r,txType:exports.eEthereumTxType.STAKE_ACTION,gas:this.generateTxPriceEstimation([],r)}]);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.claimRewards=function(){var e=u(ve.mark((function e(t,n){var r,a,i,o,s;return ve.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=this.getContractInstance(this.stakingContractAddress),"-1"!==n){e.next=5;break}r=be,e.next=13;break;case 5:return i=this.erc20Service.decimalsOf,e.next=8,a.REWARD_TOKEN();case 8:return o=e.sent,e.next=11,i(o);case 11:r=it(n,e.sent);case 13:return s=this.generateTxCallback({rawTxMethod:function(){return a.populateTransaction.claimRewards(t,r)},from:t,gasSurplus:20}),e.abrupt("return",[{tx:s,txType:exports.eEthereumTxType.STAKE_ACTION,gas:this.generateTxPriceEstimation([],s)}]);case 15:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),t}(Ot);r.__decorate([function(e,t,n){var r=n.value;n.value=function(){var n=this.stakingConfig||{},i=n.TOKEN_STAKING,o=n.STAKING_REWARD_TOKEN,s=n.STAKING_HELPER;if(!(a.utils.isAddress(i)&&a.utils.isAddress(o)&&s&&a.utils.isAddress(i)))return console.error("[StakingValidator] You need to pass valid addresses"),[];var u=_t(e,t,arguments);return bt(e,t,arguments,u),wt(e,t,arguments,u),null==r?void 0:r.apply(this,arguments)}},r.__param(0,ft()),r.__param(1,gt()),r.__metadata("design:type",Function),r.__metadata("design:paramtypes",[String,String,String]),r.__metadata("design:returntype",Promise)],Ft.prototype,"signStaking",null),r.__decorate([St,r.__param(0,ft()),r.__param(1,gt()),r.__metadata("design:type",Function),r.__metadata("design:paramtypes",[String,String,String]),r.__metadata("design:returntype",Promise)],Ft.prototype,"stakeWithPermit",null),r.__decorate([St,r.__param(0,ft()),r.__param(1,gt()),r.__param(2,(function(e,t,n){var r=Reflect.getOwnMetadata(mt,e,t)||[];r.push(n),Reflect.defineMetadata(mt,r,e,t)})),r.__param(2,ft()),r.__metadata("design:type",Function),r.__metadata("design:paramtypes",[String,String,String]),r.__metadata("design:returntype",Promise)],Ft.prototype,"stake",null),r.__decorate([St,r.__param(0,ft()),r.__param(1,ht()),r.__metadata("design:type",Function),r.__metadata("design:paramtypes",[String,String]),r.__metadata("design:returntype",Promise)],Ft.prototype,"redeem",null),r.__decorate([St,r.__param(0,ft()),r.__metadata("design:type",Function),r.__metadata("design:paramtypes",[String]),r.__metadata("design:returntype",Promise)],Ft.prototype,"cooldown",null),r.__decorate([St,r.__param(0,ft()),r.__param(1,ht()),r.__metadata("design:type",Function),r.__metadata("design:paramtypes",[String,String]),r.__metadata("design:returntype",Promise)],Ft.prototype,"claimRewards",null);var Gt=function(e){function t(t){var n,r;return(r=e.call(this,t,tt)||this).synthetixValidation=function(){var e=u(ve.mark((function e(t,n,a){return ve.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.toUpperCase()!==r.synthAddress.toUpperCase()){e.next=2;break}return e.abrupt("return",r.isSnxTransferable(t,a));case 2:return e.abrupt("return",!0);case 3:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),r.isSnxTransferable=function(){var e=u(ve.mark((function e(t,n){var i,o;return ve.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=r.getContractInstance(r.synthAddress),e.next=3,i.transferableSynthetix(t);case 3:return o=e.sent,e.abrupt("return",a.BigNumber.from(n).lte(o));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),r.synthAddress=(null==(n=Ae[r.config.network])?void 0:n.SYNTHETIX_PROXY_ADDRESS)||"",r}return l(t,e),t}(Ot),qt=function(e){function t(t,n){var r;(r=e.call(this,t,Se)||this).incentivesConfig=n;var a=r.incentivesConfig||{},i=a.INCENTIVES_CONTROLLER_REWARD_TOKEN;return r.incentivesControllerAddress=a.INCENTIVES_CONTROLLER||"",r.incentivesControllerRewardTokenAddress=i||"",r}return l(t,e),t.prototype.claimRewards=function(e){var t=e.user,n=e.assets,r=e.to,i=this.getContractInstance(this.incentivesControllerAddress),o=this.generateTxCallback({rawTxMethod:function(){return i.populateTransaction.claimRewards(n,a.constants.MaxUint256.toString(),r||t)},from:t});return[{tx:o,txType:exports.eEthereumTxType.REWARD_ACTION,gas:this.generateTxPriceEstimation([],o)}]},t}(Ot);r.__decorate([function(e,t,n){var r=n.value;n.value=function(){var n=this.incentivesConfig||{},i=n.INCENTIVES_CONTROLLER,o=n.INCENTIVES_CONTROLLER_REWARD_TOKEN;return a.utils.isAddress(o)&&a.utils.isAddress(i)?(bt(e,t,arguments),null==r?void 0:r.apply(this,arguments)):(console.error("[IncentivesValidator] You need to pass valid addresses"),[])}},r.__param(0,ft("user")),r.__param(0,ft("to")),r.__metadata("design:type",Function),r.__metadata("design:paramtypes",[Object]),r.__metadata("design:returntype",Array)],qt.prototype,"claimRewards",null);var Wt={governance:{mainnet:{AAVE_GOVERNANCE_V2:"0xEC568fffba86c094cf06b22134B23074DFE2252c",AAVE_GOVERNANCE_V2_EXECUTOR_SHORT:"0x61910EcD7e8e942136CE7Fe7943f956cea1CC2f7",AAVE_GOVERNANCE_V2_EXECUTOR_LONG:"0xEE56e2B3D491590B5b31738cC34d5232F378a8D5",AAVE_GOVERNANCE_V2_HELPER:"0x16ff7583ea21055bf5f929ec4b896d997ff35847"},kovan:{AAVE_GOVERNANCE_V2:"0xc2eBaB3Bac8f2f5028f5C7317027A41EBFCa31D2",AAVE_GOVERNANCE_V2_EXECUTOR_SHORT:"0x462eD5dc919BE6C96639D5f31ab919EBA8F31831",AAVE_GOVERNANCE_V2_EXECUTOR_LONG:"0x7e5195b0A6a60b371Ba3276032CF6958eADFA652",AAVE_GOVERNANCE_V2_HELPER:"0xffd5BEb5712952FC9a9DDC7499487422B29Fdda6"}},lendingPool:{mainnet:{proto:{LENDING_POOL:"0x7d2768dE32b0b80b7a3454c06BdAc94A69DDc7A9",WETH_GATEWAY:"0xcc9a0B7c43DC2a5F023Bb9b738E45B0Ef6B06E04",FLASH_LIQUIDATION_ADAPTER:"0xE377fB98512D7b04827e56BC84e1838804a8019D",REPAY_WITH_COLLATERAL_ADAPTER:"0x498c5431eb517101582988fbb36431ddaac8f4b1",SWAP_COLLATERAL_ADAPTER:"0x135896DE8421be2ec868E0b811006171D9df802A"},amm:{LENDING_POOL:"0x7937d4799803fbbe595ed57278bc4ca21f3bffcb",WETH_GATEWAY:"0xcc9a0B7c43DC2a5F023Bb9b738E45B0Ef6B06E04",FLASH_LIQUIDATION_ADAPTER:"0xE377fB98512D7b04827e56BC84e1838804a8019D",REPAY_WITH_COLLATERAL_ADAPTER:"0x498c5431eb517101582988fbb36431ddaac8f4b1",SWAP_COLLATERAL_ADAPTER:"0x135896DE8421be2ec868E0b811006171D9df802A"}},kovan:{proto:{LENDING_POOL:"0xE0fBa4Fc209b4948668006B2bE61711b7f465bAe",WETH_GATEWAY:"0xA61ca04DF33B72b235a8A28CfB535bb7A5271B70",FLASH_LIQUIDATION_ADAPTER:"0x9D50F0b23b1805773f607F0B4678d724322B7AC2",REPAY_WITH_COLLATERAL_ADAPTER:"0xf86Be05f535EC2d217E4c6116B3fa147ee5C05A1",SWAP_COLLATERAL_ADAPTER:"0xC18451d36aA370fDACe8d45839bF975F48f7AEa1",FAUCET:"0x600103d518cC5E8f3319D532eB4e5C268D32e604"},amm:{LENDING_POOL:"0x762E2a3BBe729240ea44D31D5a81EAB44d34ef01",WETH_GATEWAY:"0xA61ca04DF33B72b235a8A28CfB535bb7A5271B70",FLASH_LIQUIDATION_ADAPTER:"0x9D50F0b23b1805773f607F0B4678d724322B7AC2",REPAY_WITH_COLLATERAL_ADAPTER:"0xf86Be05f535EC2d217E4c6116B3fa147ee5C05A1",SWAP_COLLATERAL_ADAPTER:"0xC18451d36aA370fDACe8d45839bF975F48f7AEa1",FAUCET:"0x600103d518cC5E8f3319D532eB4e5C268D32e604"}},polygon:{proto:{LENDING_POOL:"0x8dFf5E27EA6b7AC08EbFdf9eB090F32ee9a30fcf",WETH_GATEWAY:"0xbEadf48d62aCC944a06EEaE0A9054A90E5A7dc97",SWAP_COLLATERAL_ADAPTER:"0x35784a624D4FfBC3594f4d16fA3801FeF063241c"}},mumbai:{proto:{LENDING_POOL:"0x9198F13B08E299d85E096929fA9781A1E3d5d827",WETH_GATEWAY:"0xee9eE614Ad26963bEc1Bec0D2c92879ae1F209fA",FAUCET:"0x0b3C23243106A69449e79C14c58BB49E358f9B10"}}},staking:{mainnet:{aave:{TOKEN_STAKING:"0x4da27a545c0c5b758a6ba100e3a049001de870f5",STAKING_REWARD_TOKEN:"0x7fc66500c84a76ad7e9c93437bfc5ac33e2ddae9",STAKING_HELPER:"0xce0424653fb2fd48ed1b621bdbd60db16b2e388a"},balancer:{TOKEN_STAKING:"0xa1116930326D21fB917d5A27F1E9943A9595fb47",STAKING_REWARD_TOKEN:"0x7fc66500c84a76ad7e9c93437bfc5ac33e2ddae9"}},kovan:{aave:{TOKEN_STAKING:"0xf2fbf9A6710AfDa1c4AaB2E922DE9D69E0C97fd2",STAKING_REWARD_TOKEN:"0xb597cd8d3217ea6477232f9217fa70837ff667af",STAKING_HELPER:"0xf267aCc8BF1D8b41c89b6dc1a0aD8439dfbc890c"},balancer:{TOKEN_STAKING:"0x31ce45Ab6E26C72c47C52c27498D460099545ef2",STAKING_REWARD_TOKEN:"0xb597cd8d3217ea6477232f9217fa70837ff667af"}}},incentives:{mainnet:{INCENTIVES_CONTROLLER:"0xd784927Ff2f95ba542BfC824c8a8a98F3495f6b5",INCENTIVES_CONTROLLER_REWARD_TOKEN:"0x4da27a545c0c5b758a6ba100e3a049001de870f5"},polygon:{INCENTIVES_CONTROLLER:"0x357d51124f59836ded84c8a1730d72b749d8bc23",INCENTIVES_CONTROLLER_REWARD_TOKEN:"0x0d500b1d8e8ef31e21c99d1db9a6444d3adf1270"},mumbai:{INCENTIVES_CONTROLLER:"0xd41aE58e803Edf4304334acCE4DC4Ec34a63C644",INCENTIVES_CONTROLLER_REWARD_TOKEN:"0x9c3c9283d3e44854697cd22d3faa240cfb032889"}},migrator:{mainnet:{LEND_TO_AAVE_MIGRATOR:"0x317625234562b1526ea2fac4030ea499c5291de4"},kovan:{LEND_TO_AAVE_MIGRATOR:"0x8cC8965FEf45a448bdbe3C749683b280eF2E17Ea"}}},jt=function(e,t,n,r){var i,o,s,u=this;void 0===e&&(e=exports.Network.mainnet),void 0===r&&(r=Wt),this.getFaucet=function(e){var t,n;return u.faucets[e]||(u.faucets[e]=new Ut(u.configuration,null==(t=u.txBuilderConfig.lendingPool)?void 0:null==(n=t[u.configuration.network])?void 0:n[e])),u.faucets[e]},this.getStaking=function(e){if(!u.stakings[e]){var t,n,r=null==(t=u.txBuilderConfig.staking)?void 0:null==(n=t[u.configuration.network])?void 0:n[e];u.stakings[e]=new Ft(u.configuration,u.erc20Service,e,r)}return u.stakings[e]},this.txBuilderConfig=r;var p=exports.ChainId[e];t?s="string"==typeof t?new a.providers.StaticJsonRpcProvider(t,p):t instanceof a.providers.Provider?t:new a.providers.Web3Provider(t,p):n&&Object.keys(n).length>1?s=a.ethers.getDefaultProvider(e,n):(s=a.ethers.getDefaultProvider(e),console.log("These API keys are a provided as a community resource by the backend services for low-traffic projects and for early prototyping.\n          It is highly recommended to use own keys: https://docs.ethers.io/v5/api-keys/")),this.configuration={network:e,provider:s},this.erc20Service=new Mt(this.configuration),this.synthetixService=new Gt(this.configuration),this.ltaMigratorService=new Ht(this.configuration,this.erc20Service,null==(i=this.txBuilderConfig.migrator)?void 0:i[e]),this.incentiveService=new qt(this.configuration,null==(o=this.txBuilderConfig.incentives)?void 0:o[e]),this.stakings={},this.faucets={}},Kt=function(e){function t(t,n,r,a){var i,o;return(o=e.call(this,t,rt)||this).wethGatewayConfig=a,o.baseDebtTokenService=n,o.erc20Service=r,o.wethGatewayAddress=(null==(i=o.wethGatewayConfig)?void 0:i.WETH_GATEWAY)||"",o}l(t,e);var n=t.prototype;return n.depositETH=function(){var e=u(ve.mark((function e(t){var n,r,a,i,o,s,u;return ve.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.lendingPool,r=t.user,a=t.onBehalfOf,i=t.referralCode,o=it(t.amount,18),s=this.getContractInstance(this.wethGatewayAddress),u=this.generateTxCallback({rawTxMethod:function(){return s.populateTransaction.depositETH(n,a||r,i||"0")},from:r,value:o}),e.abrupt("return",[{tx:u,txType:exports.eEthereumTxType.DLP_ACTION,gas:this.generateTxPriceEstimation([],u)}]);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.borrowETH=function(){var e=u(ve.mark((function e(t){var n,r,i,o,s,u,p,l,d,c,y,m;return ve.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.lendingPool,r=t.user,o=t.debtTokenAddress,s=t.interestRateMode,u=t.referralCode,p=[],l=it(i=t.amount,18),d=s===exports.InterestRate.Variable?2:1,e.next=6,this.baseDebtTokenService.isDelegationApproved(o,r,this.wethGatewayAddress,i);case 6:return e.sent||(c=this.baseDebtTokenService.approveDelegation(r,this.wethGatewayAddress,o,a.constants.MaxUint256.toString()),p.push(c)),y=this.getContractInstance(this.wethGatewayAddress),m=this.generateTxCallback({rawTxMethod:function(){return y.populateTransaction.borrowETH(n,l,d,u||"0")},from:r}),p.push({tx:m,txType:exports.eEthereumTxType.DLP_ACTION,gas:this.generateTxPriceEstimation(p,m,exports.ProtocolAction.borrowETH)}),e.abrupt("return",p);case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.withdrawETH=function(){var e=u(ve.mark((function e(t){var n,r,i,o,s,u,p,l,d,c,y,m,f;return ve.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.lendingPool,r=t.user,o=t.onBehalfOf,s=t.aTokenAddress,u=[],l=(p=this.erc20Service).isApproved,d=p.approve,c="-1"===(i=t.amount)?a.constants.MaxUint256.toString():it(i,18),e.next=6,l(s,r,this.wethGatewayAddress,i);case 6:return e.sent||(y=d(r,s,this.wethGatewayAddress,a.constants.MaxUint256.toString()),u.push(y)),m=this.getContractInstance(this.wethGatewayAddress),f=this.generateTxCallback({rawTxMethod:function(){return m.populateTransaction.withdrawETH(n,c,o||r)},from:r}),u.push({tx:f,txType:exports.eEthereumTxType.DLP_ACTION,gas:this.generateTxPriceEstimation(u,f,exports.ProtocolAction.withdrawETH)}),e.abrupt("return",u);case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.repayETH=function(){var e=u(ve.mark((function e(t){var n,r,a,i,o,s,u,p;return ve.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.lendingPool,r=t.user,a=t.interestRateMode,i=t.onBehalfOf,o=it(t.amount,18),s=a===exports.InterestRate.Variable?2:1,u=this.getContractInstance(this.wethGatewayAddress),p=this.generateTxCallback({rawTxMethod:function(){return u.populateTransaction.repayETH(n,o,s,i||r)},gasSurplus:30,from:r,value:o}),e.abrupt("return",[{tx:p,txType:exports.eEthereumTxType.DLP_ACTION,gas:this.generateTxPriceEstimation([],p)}]);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),t}(Ot);r.__decorate([Bt,r.__param(0,ft("lendingPool")),r.__param(0,ft("user")),r.__param(0,ft("onBehalfOf")),r.__param(0,gt("amount")),r.__metadata("design:type",Function),r.__metadata("design:paramtypes",[Object]),r.__metadata("design:returntype",Promise)],Kt.prototype,"depositETH",null),r.__decorate([Bt,r.__param(0,ft("lendingPool")),r.__param(0,ft("user")),r.__param(0,gt("amount")),r.__param(0,ft("debtTokenAddress")),r.__metadata("design:type",Function),r.__metadata("design:paramtypes",[Object]),r.__metadata("design:returntype",Promise)],Kt.prototype,"borrowETH",null),r.__decorate([Bt,r.__param(0,ft("lendingPool")),r.__param(0,ft("user")),r.__param(0,ft("onBehalfOf")),r.__param(0,ht("amount")),r.__param(0,ft("aTokenAddress")),r.__metadata("design:type",Function),r.__metadata("design:paramtypes",[Object]),r.__metadata("design:returntype",Promise)],Kt.prototype,"withdrawETH",null),r.__decorate([Bt,r.__param(0,ft("lendingPool")),r.__param(0,ft("user")),r.__param(0,ft("onBehalfOf")),r.__param(0,gt("amount")),r.__metadata("design:type",Function),r.__metadata("design:paramtypes",[Object]),r.__metadata("design:returntype",Promise)],Kt.prototype,"repayETH",null);var Yt,Xt,Qt=function(e){function t(t,n){var r;return(r=e.call(this,t,Re)||this).erc20Service=n,r}l(t,e);var n=t.prototype;return n.approveDelegation=function(e,t,n,r){var a=this.getContractInstance(n),i=this.generateTxCallback({rawTxMethod:function(){return a.populateTransaction.approveDelegation(t,r)},from:e});return{tx:i,txType:exports.eEthereumTxType.ERC20_APPROVAL,gas:this.generateTxPriceEstimation([],i)}},n.isDelegationApproved=function(){var e=u(ve.mark((function e(t,n,r,i){var o,s,u,p;return ve.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.erc20Service.decimalsOf(t);case 2:return o=e.sent,s=this.getContractInstance(t),e.next=6,s.borrowAllowance(n,r);case 6:return u=e.sent,p=a.BigNumber.from(it(i,o)),e.abrupt("return",u.gt(p));case 9:case"end":return e.stop()}}),e,this)})));return function(t,n,r,a){return e.apply(this,arguments)}}(),t}(Ot),zt=function(e){function t(t,n){var r,a;return(a=e.call(this,t,Qe)||this).repayWithCollateralConfig=n,a.repayWithCollateralAddress=(null==(r=a.repayWithCollateralConfig)?void 0:r.REPAY_WITH_COLLATERAL_ADAPTER)||"",a}return l(t,e),t.prototype.swapAndRepay=function(e,t){var n=e.user,r=e.collateralAsset,a=e.debtAsset,i=e.collateralAmount,o=e.debtRepayAmount,s=e.debtRateMode,u=e.permit,p=e.useEthPath,l=this.getContractInstance(this.repayWithCollateralAddress),d=this.generateTxCallback({rawTxMethod:function(){return l.populateTransaction.swapAndRepay(r,a,i,o,s,u,p||!1)},from:n});return{tx:d,txType:exports.eEthereumTxType.DLP_ACTION,gas:this.generateTxPriceEstimation(t||[],d,exports.ProtocolAction.repayCollateral)}},t}(Ot);function Jt(e){return"https://cloudflare-ipfs.com/ipfs/"+e}r.__decorate([function(e,t,n){var r=n.value;n.value=function(){var n,i=(null==(n=this.repayWithCollateralConfig)?void 0:n.REPAY_WITH_COLLATERAL_ADAPTER)||"";return a.utils.isAddress(i)?(bt(e,t,arguments),wt(e,t,arguments),Et(e,t,arguments),null==r?void 0:r.apply(this,arguments)):(console.error("[RepayWithCollateralValidator] You need to pass valid addresses"),[])}},r.__param(0,ft("user")),r.__param(0,ft("collateralAsset")),r.__param(0,ft("debtAsset")),r.__param(0,gt("collateralAmount")),r.__param(0,gt("debtRepayAmount")),r.__metadata("design:type",Function),r.__metadata("design:paramtypes",[Object,Array]),r.__metadata("design:returntype",Object)],zt.prototype,"swapAndRepay",null),(Yt=exports.ExecutorType||(exports.ExecutorType={}))[Yt.Short=0]="Short",Yt[Yt.Long=1]="Long",(Xt=exports.ProposalState||(exports.ProposalState={})).Pending="Pending",Xt.Canceled="Canceled",Xt.Active="Active",Xt.Failed="Failed",Xt.Succeeded="Succeeded",Xt.Queued="Queued",Xt.Expired="Expired",Xt.Executed="Executed";var Zt={};function $t(e){return en.apply(this,arguments)}function en(){return(en=u(ve.mark((function e(t){var n,r;return ve.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.base58.encode(Buffer.from("1220"+t.slice(2),"hex")),!Zt[n]){e.next=3;break}return e.abrupt("return",Zt[n]);case 3:return e.prev=3,e.next=6,o.get(Jt(n),{timeout:2e3});case 6:if(null!=(r=e.sent.data)&&r.title){e.next=10;break}throw Error("Missing title field at proposal metadata.");case 10:if(null!=r&&r.description){e.next=12;break}throw Error("Missing description field at proposal metadata.");case 12:if(null!=r&&r.shortDescription){e.next=14;break}throw Error("Missing shortDescription field at proposal metadata.");case 14:return Zt[n]={ipfsHash:n,title:r.title,description:r.description,shortDescription:r.shortDescription},e.abrupt("return",Zt[n]);case 18:return e.prev=18,e.t0=e.catch(3),console.error("@aave/protocol-js: IPFS fetch Error: "+e.t0.message),e.abrupt("return",{ipfsHash:n,title:"Proposal - "+n,description:"Proposal with invalid metadata format or IPFS gateway is down",shortDescription:"Proposal with invalid metadata format or IPFS gateway is down"});case 22:case"end":return e.stop()}}),e,null,[[3,18]])})))).apply(this,arguments)}var tn=function(){var e=u(ve.mark((function e(t){var n,r,a,i,o,s,u,p,l,d,c,y,m,f,T,g,v,h,_,b,x,w,A,E,C;return ve.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.id,r=t.creator,a=t.executor,i=t.targets,o=t.values,s=t.signatures,u=t.calldatas,p=t.withDelegatecalls,l=t.startBlock,d=t.endBlock,c=t.executionTime,y=t.forVotes,m=t.againstVotes,f=t.executed,T=t.canceled,g=t.strategy,v=t.ipfsHash,h=t.totalVotingSupply,_=t.minimumQuorum,b=t.minimumDiff,x=t.executionTimeWithGracePeriod,w=t.proposalCreated,A=t.proposalState,e.next=3,$t(v);case 3:return E=e.sent,C={id:Number(n.toString()),creator:r,executor:a,targets:i,values:o,signatures:s,calldatas:u,withDelegatecalls:p,startBlock:Number(l.toString()),endBlock:Number(d.toString()),executionTime:c.toString(),forVotes:y.toString(),againstVotes:m.toString(),executed:f,canceled:T,strategy:g,ipfsHash:E.ipfsHash,state:Object.values(exports.ProposalState)[A],minimumQuorum:_.toString(),minimumDiff:b.toString(),executionTimeWithGracePeriod:x.toString(),title:E.title,description:E.description,shortDescription:E.shortDescription,proposalCreated:Number(w.toString()),totalVotingSupply:h.toString()},e.abrupt("return",C);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),nn=function(e){function t(t,n){var r;(r=e.call(this,t,Ee)||this).executors=[],r.governanceConfig=n;var a=r.governanceConfig||{},i=a.AAVE_GOVERNANCE_V2_HELPER,o=a.AAVE_GOVERNANCE_V2_EXECUTOR_SHORT,s=a.AAVE_GOVERNANCE_V2_EXECUTOR_LONG;return r.aaveGovernanceV2Address=a.AAVE_GOVERNANCE_V2||"",r.aaveGovernanceV2HelperAddress=i||"",r.executors[exports.ExecutorType.Short]=o||"",r.executors[exports.ExecutorType.Long]=s||"",r}l(t,e);var n=t.prototype;return n.create=function(){var e=u(ve.mark((function e(t){var n,r,a,i,o,s,u,p,l,d,c,y=this;return ve.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.user,r=t.targets,a=t.values,i=t.signatures,o=t.calldatas,s=t.withDelegateCalls,u=t.ipfsHash,p=t.executor,l=[],d=this.getContractInstance(this.aaveGovernanceV2Address),c=this.generateTxCallback({rawTxMethod:function(){return d.populateTransaction.create(y.executors[p],r,a,i,o,s,u)},from:n}),l.push({tx:c,txType:exports.eEthereumTxType.GOVERNANCE_ACTION,gas:this.generateTxPriceEstimation(l,c)}),e.abrupt("return",l);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.cancel=function(){var e=u(ve.mark((function e(t){var n,r,a,i,o;return ve.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.user,r=t.proposalId,a=[],i=this.getContractInstance(this.aaveGovernanceV2Address),o=this.generateTxCallback({rawTxMethod:function(){return i.populateTransaction.cancel(r)},from:n}),a.push({tx:o,txType:exports.eEthereumTxType.GOVERNANCE_ACTION,gas:this.generateTxPriceEstimation(a,o)}),e.abrupt("return",a);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.queue=function(){var e=u(ve.mark((function e(t){var n,r,a,i,o;return ve.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.user,r=t.proposalId,a=[],i=this.getContractInstance(this.aaveGovernanceV2Address),o=this.generateTxCallback({rawTxMethod:function(){return i.populateTransaction.queue(r)},from:n}),a.push({tx:o,txType:exports.eEthereumTxType.GOVERNANCE_ACTION,gas:this.generateTxPriceEstimation(a,o)}),e.abrupt("return",a);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.execute=function(){var e=u(ve.mark((function e(t){var n,r,a,i,o;return ve.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.user,r=t.proposalId,a=[],i=this.getContractInstance(this.aaveGovernanceV2Address),o=this.generateTxCallback({rawTxMethod:function(){return i.populateTransaction.execute(r)},from:n}),a.push({tx:o,txType:exports.eEthereumTxType.GOVERNANCE_ACTION,gas:this.generateTxPriceEstimation(a,o)}),e.abrupt("return",a);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.submitVote=function(){var e=u(ve.mark((function e(t){var n,r,a,i,o,s;return ve.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.user,r=t.proposalId,a=t.support,i=[],o=this.getContractInstance(this.aaveGovernanceV2Address),s=this.generateTxCallback({rawTxMethod:function(){return o.populateTransaction.submitVote(r,a)},from:n}),i.push({tx:s,txType:exports.eEthereumTxType.GOVERNANCE_ACTION,gas:this.generateTxPriceEstimation(i,s)}),e.abrupt("return",i);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.signVoting=function(){var e=u(ve.mark((function e(t){var n;return ve.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={types:{EIP712Domain:[{name:"name",type:"string"},{name:"chainId",type:"uint256"},{name:"verifyingContract",type:"address"}],VoteEmitted:[{name:"id",type:"uint256"},{name:"support",type:"bool"}]},primaryType:"VoteEmitted",domain:{name:"Aave Governance v2",chainId:exports.ChainId[this.config.network],verifyingContract:this.aaveGovernanceV2Address},message:{support:t.support,id:t.proposalId}},e.abrupt("return",JSON.stringify(n));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.submitVoteBySignature=function(){var e=u(ve.mark((function e(t){var n,r,i,o,s,u,p,l;return ve.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.user,r=t.proposalId,i=t.support,o=t.signature,s=[],u=this.getContractInstance(this.aaveGovernanceV2Address),p=a.utils.splitSignature(o),l=this.generateTxCallback({rawTxMethod:function(){return u.populateTransaction.submitVoteBySignature(r,i,p.v,p.r,p.s)},from:n}),s.push({tx:l,txType:exports.eEthereumTxType.GOVERNANCE_ACTION,gas:this.generateTxPriceEstimation(s,l)}),e.abrupt("return",s);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.getProposals=function(){var e=u(ve.mark((function e(t){var n,r,a,i;return ve.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.skip,r=t.limit,a=Fe.connect(this.aaveGovernanceV2HelperAddress,this.config.provider),e.next=5,a.getProposals(n.toString(),r.toString(),this.aaveGovernanceV2Address);case 5:return i=Promise.all(e.sent.map(function(){var e=u(ve.mark((function e(t){return ve.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",tn(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())),e.abrupt("return",i);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.getProposal=function(){var e=u(ve.mark((function e(t){var n,r;return ve.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.proposalId,r=Fe.connect(this.aaveGovernanceV2HelperAddress,this.config.provider),e.next=5,r.getProposal(n,this.aaveGovernanceV2Address);case 5:return e.abrupt("return",tn(e.sent));case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.getPropositionPowerAt=function(){var e=u(ve.mark((function e(t){var n,r,a;return ve.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.user,r=t.block,a=Ue.connect(t.strategy,this.config.provider),e.next=5,a.getPropositionPowerAt(n,r.toString());case 5:return e.abrupt("return",i.formatEther(e.sent));case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.getVotingPowerAt=function(){var e=u(ve.mark((function e(t){var n,r,a;return ve.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.user,r=t.block,a=Ue.connect(t.strategy,this.config.provider),e.next=5,a.getVotingPowerAt(n,r.toString());case 5:return e.abrupt("return",i.formatEther(e.sent));case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.getTotalPropositionSupplyAt=function(){var e=u(ve.mark((function e(t){var n,r;return ve.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.block,r=Ue.connect(t.strategy,this.config.provider),e.next=5,r.getTotalPropositionSupplyAt(n.toString());case 5:return e.abrupt("return",i.formatEther(e.sent));case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.getTotalVotingSupplyAt=function(){var e=u(ve.mark((function e(t){var n,r;return ve.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.block,r=Ue.connect(t.strategy,this.config.provider),e.next=5,r.getTotalVotingSupplyAt(n.toString());case 5:return e.abrupt("return",i.formatEther(e.sent));case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.getTokensPower=function(){var e=u(ve.mark((function e(t){var n,r,a,i;return ve.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.user,r=t.tokens,a=Fe.connect(this.aaveGovernanceV2HelperAddress,this.config.provider),i=a.getTokensPower(n,r),e.abrupt("return",i);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.getVoteOnProposal=function(){var e=u(ve.mark((function e(t){var n,r,a;return ve.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.proposalId,r=t.user,a=this.getContractInstance(this.aaveGovernanceV2Address),e.abrupt("return",a.getVoteOnProposal(n,r));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),t}(Ot);r.__decorate([Pt,r.__param(0,ft("user")),r.__metadata("design:type",Function),r.__metadata("design:paramtypes",[Object]),r.__metadata("design:returntype",Promise)],nn.prototype,"create",null),r.__decorate([Pt,r.__param(0,ft("user")),r.__param(0,vt("proposalId")),r.__metadata("design:type",Function),r.__metadata("design:paramtypes",[Object]),r.__metadata("design:returntype",Promise)],nn.prototype,"cancel",null),r.__decorate([Pt,r.__param(0,ft("user")),r.__param(0,vt("proposalId")),r.__metadata("design:type",Function),r.__metadata("design:paramtypes",[Object]),r.__metadata("design:returntype",Promise)],nn.prototype,"queue",null),r.__decorate([Pt,r.__param(0,ft("user")),r.__param(0,vt("proposalId")),r.__metadata("design:type",Function),r.__metadata("design:paramtypes",[Object]),r.__metadata("design:returntype",Promise)],nn.prototype,"execute",null),r.__decorate([Pt,r.__param(0,ft("user")),r.__param(0,vt("proposalId")),r.__metadata("design:type",Function),r.__metadata("design:paramtypes",[Object]),r.__metadata("design:returntype",Promise)],nn.prototype,"submitVote",null),r.__decorate([Pt,r.__param(0,vt("proposalId")),r.__metadata("design:type",Function),r.__metadata("design:paramtypes",[Object]),r.__metadata("design:returntype",Promise)],nn.prototype,"signVoting",null),r.__decorate([Pt,r.__param(0,ft("user")),r.__param(0,vt("proposalId")),r.__metadata("design:type",Function),r.__metadata("design:paramtypes",[Object]),r.__metadata("design:returntype",Promise)],nn.prototype,"submitVoteBySignature",null),r.__decorate([Pt,r.__metadata("design:type",Function),r.__metadata("design:paramtypes",[Object]),r.__metadata("design:returntype",Promise)],nn.prototype,"getProposals",null),r.__decorate([Pt,r.__metadata("design:type",Function),r.__metadata("design:paramtypes",[Object]),r.__metadata("design:returntype",Promise)],nn.prototype,"getProposal",null),r.__decorate([Pt,r.__metadata("design:type",Function),r.__metadata("design:paramtypes",[Object]),r.__metadata("design:returntype",Promise)],nn.prototype,"getPropositionPowerAt",null),r.__decorate([Pt,r.__metadata("design:type",Function),r.__metadata("design:paramtypes",[Object]),r.__metadata("design:returntype",Promise)],nn.prototype,"getVotingPowerAt",null),r.__decorate([Pt,r.__metadata("design:type",Function),r.__metadata("design:paramtypes",[Object]),r.__metadata("design:returntype",Promise)],nn.prototype,"getTotalPropositionSupplyAt",null),r.__decorate([Pt,r.__metadata("design:type",Function),r.__metadata("design:paramtypes",[Object]),r.__metadata("design:returntype",Promise)],nn.prototype,"getTotalVotingSupplyAt",null),r.__decorate([Pt,r.__metadata("design:type",Function),r.__metadata("design:paramtypes",[Object]),r.__metadata("design:returntype",Promise)],nn.prototype,"getTokensPower",null),r.__decorate([Pt,r.__metadata("design:type",Function),r.__metadata("design:paramtypes",[Object]),r.__metadata("design:returntype",Promise)],nn.prototype,"getVoteOnProposal",null);var rn=function(e){function t(t){return e.call(this,t,Ve)||this}l(t,e);var n=t.prototype;return n.delegate=function(){var e=u(ve.mark((function e(t){var n,r,a,i,o,s;return ve.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.user,r=t.delegatee,a=[],i=this.getContractInstance(t.governanceToken),e.next=5,this.getDelegateeAddress(r);case 5:return o=e.sent,s=this.generateTxCallback({rawTxMethod:function(){return i.populateTransaction.delegate(o)},from:n}),a.push({tx:s,txType:exports.eEthereumTxType.GOV_DELEGATION_ACTION,gas:this.generateTxPriceEstimation(a,s)}),e.abrupt("return",a);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.delegateByType=function(){var e=u(ve.mark((function e(t){var n,r,a,i,o,s,u;return ve.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.user,r=t.delegatee,a=t.delegationType,i=[],o=this.getContractInstance(t.governanceToken),e.next=5,this.getDelegateeAddress(r);case 5:return s=e.sent,u=this.generateTxCallback({rawTxMethod:function(){return o.populateTransaction.delegateByType(s,a)},from:n}),i.push({tx:u,txType:exports.eEthereumTxType.GOV_DELEGATION_ACTION,gas:this.generateTxPriceEstimation(i,u)}),e.abrupt("return",i);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.delegateBySig=function(){var e=u(ve.mark((function e(t){var n,r,a,o,s,u,p,l,d,c,y,m,f,T;return ve.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.user,r=t.delegatee,a=t.expiry,o=t.signature,u=[],p=this.getContractInstance(s=t.governanceToken),e.next=5,this.getNonce({user:n,governanceToken:s});case 5:return l=e.sent,d=i.splitSignature(o),c=d.v,y=d.r,m=d.s,e.next=9,this.getDelegateeAddress(r);case 9:return f=e.sent,T=this.generateTxCallback({rawTxMethod:function(){return p.populateTransaction.delegateBySig(f,l,a,c,y,m)},from:n}),u.push({tx:T,txType:exports.eEthereumTxType.GOV_DELEGATION_ACTION,gas:this.generateTxPriceEstimation(u,T)}),e.abrupt("return",u);case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.delegateByTypeBySig=function(){var e=u(ve.mark((function e(t){var n,r,a,o,s,u,p,l,d,c,y,m,f,T,g;return ve.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.user,r=t.delegatee,a=t.delegationType,o=t.expiry,s=t.signature,p=[],l=this.getContractInstance(u=t.governanceToken),e.next=5,this.getNonce({user:n,governanceToken:u});case 5:return d=e.sent,c=i.splitSignature(s),y=c.v,m=c.r,f=c.s,e.next=9,this.getDelegateeAddress(r);case 9:return T=e.sent,g=this.generateTxCallback({rawTxMethod:function(){return l.populateTransaction.delegateByTypeBySig(T,a,d,o,y,m,f)},from:n}),p.push({tx:g,txType:exports.eEthereumTxType.GOV_DELEGATION_ACTION,gas:this.generateTxPriceEstimation(p,g)}),e.abrupt("return",p);case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.prepareDelegateSignature=function(){var e=u(ve.mark((function e(t){var n,r,a,i,o,s;return ve.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.delegatee,r=t.nonce,a=t.expiry,i=t.governanceTokenName,o=t.governanceToken,e.next=3,this.getDelegateeAddress(n);case 3:return s={types:{EIP712Domain:[{name:"name",type:"string"},{name:"chainId",type:"uint256"},{name:"verifyingContract",type:"address"}],Delegate:[{name:"delegatee",type:"address"},{name:"nonce",type:"uint256"},{name:"expiry",type:"uint256"}]},primaryType:"Delegate",domain:{name:i,chainId:exports.ChainId[this.config.network],verifyingContract:o},message:{delegatee:e.sent,nonce:r,expiry:a}},e.abrupt("return",JSON.stringify(s));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.prepareDelegateByTypeSignature=function(){var e=u(ve.mark((function e(t){var n,r,a,i,o,s,u;return ve.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.delegatee,r=t.type,a=t.nonce,i=t.expiry,o=t.governanceTokenName,s=t.governanceToken,e.next=3,this.getDelegateeAddress(n);case 3:return u={types:{EIP712Domain:[{name:"name",type:"string"},{name:"chainId",type:"uint256"},{name:"verifyingContract",type:"address"}],DelegateByType:[{name:"delegatee",type:"address"},{name:"type",type:"uint256"},{name:"nonce",type:"uint256"},{name:"expiry",type:"uint256"}]},primaryType:"DelegateByType",domain:{name:o,chainId:exports.ChainId[this.config.network],verifyingContract:s},message:{delegatee:e.sent,type:r,nonce:a,expiry:i}},e.abrupt("return",JSON.stringify(u));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.getDelegateeByType=function(){var e=u(ve.mark((function e(t){var n,r,a;return ve.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.delegator,r=t.delegationType,a=this.getContractInstance(t.governanceToken),e.abrupt("return",a.getDelegateeByType(n,r));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.getPowerCurrent=function(){var e=u(ve.mark((function e(t){var n,r,a;return ve.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.user,r=t.delegationType,a=this.getContractInstance(t.governanceToken),e.next=4,a.getPowerCurrent(n,r);case 4:return e.abrupt("return",e.sent.toString());case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.getPowerAtBlock=function(){var e=u(ve.mark((function e(t){var n,r,a,i;return ve.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.user,r=t.blockNumber,a=t.delegationType,i=this.getContractInstance(t.governanceToken),e.next=4,i.getPowerAtBlock(n,r,a);case 4:return e.abrupt("return",e.sent.toString());case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.getNonce=function(){var e=u(ve.mark((function e(t){var n,r;return ve.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.user,r=this.getContractInstance(t.governanceToken),e.next=4,r._nonces(n);case 4:return e.abrupt("return",e.sent.toString());case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.getDelegateeAddress=function(){var e=u(ve.mark((function e(t){var n;return ve.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!ut(t)){e.next=7;break}return e.next=3,this.config.provider.resolveName(t);case 3:if(n=e.sent){e.next=6;break}throw new Error("Address "+t+" is not a valid ENS address");case 6:return e.abrupt("return",n);case 7:return e.abrupt("return",t);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),t}(Ot);r.__decorate([Dt,r.__param(0,ft("user")),r.__param(0,Tt("delegatee")),r.__param(0,ft("governanceToken")),r.__metadata("design:type",Function),r.__metadata("design:paramtypes",[Object]),r.__metadata("design:returntype",Promise)],rn.prototype,"delegate",null),r.__decorate([Dt,r.__param(0,ft("user")),r.__param(0,Tt("delegatee")),r.__param(0,ft("governanceToken")),r.__metadata("design:type",Function),r.__metadata("design:paramtypes",[Object]),r.__metadata("design:returntype",Promise)],rn.prototype,"delegateByType",null),r.__decorate([Dt,r.__param(0,ft("user")),r.__param(0,Tt("delegatee")),r.__param(0,ft("governanceToken")),r.__metadata("design:type",Function),r.__metadata("design:paramtypes",[Object]),r.__metadata("design:returntype",Promise)],rn.prototype,"delegateBySig",null),r.__decorate([Dt,r.__param(0,ft("user")),r.__param(0,Tt("delegatee")),r.__param(0,ft("governanceToken")),r.__metadata("design:type",Function),r.__metadata("design:paramtypes",[Object]),r.__metadata("design:returntype",Promise)],rn.prototype,"delegateByTypeBySig",null),r.__decorate([Dt,r.__param(0,Tt("delegatee")),r.__param(0,ft("governanceToken")),r.__param(0,vt("nonce")),r.__metadata("design:type",Function),r.__metadata("design:paramtypes",[Object]),r.__metadata("design:returntype",Promise)],rn.prototype,"prepareDelegateSignature",null),r.__decorate([Dt,r.__param(0,Tt("delegatee")),r.__param(0,ft("governanceToken")),r.__param(0,vt("nonce")),r.__metadata("design:type",Function),r.__metadata("design:paramtypes",[Object]),r.__metadata("design:returntype",Promise)],rn.prototype,"prepareDelegateByTypeSignature",null),r.__decorate([Dt,r.__param(0,ft("delegator")),r.__param(0,ft("governanceToken")),r.__metadata("design:type",Function),r.__metadata("design:paramtypes",[Object]),r.__metadata("design:returntype",Promise)],rn.prototype,"getDelegateeByType",null),r.__decorate([Dt,r.__param(0,ft("user")),r.__param(0,ft("governanceToken")),r.__metadata("design:type",Function),r.__metadata("design:paramtypes",[Object]),r.__metadata("design:returntype",Promise)],rn.prototype,"getPowerCurrent",null),r.__decorate([Dt,r.__param(0,ft("user")),r.__param(0,ft("governanceToken")),r.__param(0,gt("blockNumber")),r.__metadata("design:type",Function),r.__metadata("design:paramtypes",[Object]),r.__metadata("design:returntype",Promise)],rn.prototype,"getPowerAtBlock",null),r.__decorate([Dt,r.__param(0,ft("user")),r.__param(0,ft("governanceToken")),r.__metadata("design:type",Function),r.__metadata("design:paramtypes",[Object]),r.__metadata("design:returntype",Promise)],rn.prototype,"getNonce",null);var an=function(e){function t(t,n,r,a){var i,o;return void 0===t&&(t=exports.Network.mainnet),(o=e.call(this,t,n,r,a)||this).getRepayWithCollateralAdapter=function(e){var t,n;return o.repayWithCollateralAdapters[e]||(o.repayWithCollateralAdapters[e]=new zt(o.configuration,null==(t=o.txBuilderConfig.lendingPool)?void 0:null==(n=t[o.configuration.network])?void 0:n[e])),o.repayWithCollateralAdapters[e]},o.getSwapCollateralAdapter=function(e){var t,n;return o.swapCollateralAdapters[e]||(o.swapCollateralAdapters[e]=new Nt(o.configuration,null==(t=o.txBuilderConfig.lendingPool)?void 0:null==(n=t[o.configuration.network])?void 0:n[e])),o.swapCollateralAdapters[e]},o.getWethGateway=function(e){var t,n;return o.wethGateways[e]||(o.wethGateways[e]=new Kt(o.configuration,o.baseDebtTokenService,o.erc20Service,null==(t=o.txBuilderConfig.lendingPool)?void 0:null==(n=t[o.configuration.network])?void 0:n[e])),o.wethGateways[e]},o.getLendingPool=function(e){var t,n,r=o.configuration.network;return o.lendingPools[e]||(o.lendingPools[e]=new Vt(o.configuration,o.erc20Service,o.synthetixService,o.getWethGateway(e),o.getSwapCollateralAdapter(e),o.getRepayWithCollateralAdapter(e),e,null==(t=o.txBuilderConfig.lendingPool)?void 0:null==(n=t[r])?void 0:n[e])),o.lendingPools[e]},o.wethGateways={},o.lendingPools={},o.swapCollateralAdapters={},o.repayWithCollateralAdapters={},o.baseDebtTokenService=new Qt(o.configuration,o.erc20Service),o.aaveGovernanceV2Service=new nn(o.configuration,null==(i=o.txBuilderConfig.governance)?void 0:i[t]),o.governanceDelegationTokenService=new rn(o.configuration),o}return l(t,e),t}(jt);Object.defineProperty(exports,"BigNumber",{enumerable:!0,get:function(){return t.BigNumber}}),exports.API_ETH_MOCK_ADDRESS=xe,exports.BigNumberZD=c,exports.DEFAULT_APPROVE_AMOUNT=_e,exports.DEFAULT_NULL_VALUE_ON_TX=he,exports.ETH_DECIMALS=18,exports.HALF_RAY=A,exports.HALF_WAD=x,exports.LTV_PRECISION=4,exports.MAX_UINT_AMOUNT=be,exports.RAY=w,exports.RAY_DECIMALS=27,exports.SECONDS_PER_YEAR=k,exports.SUPER_BIG_ALLOWANCE_NUMBER="11579208923731619542357098500868790785326998466564056403945758400791",exports.SURPLUS="0.05",exports.TxBuilderV2=an,exports.USD_DECIMALS=10,exports.WAD=b,exports.WAD_RAY_RATIO=E,exports.binomialApproximatedRayPow=R,exports.calculateAvailableBorrowsETH=H,exports.calculateAverageRate=F,exports.calculateCompoundedInterest=O,exports.calculateHealthFactorFromBalances=U,exports.calculateHealthFactorFromBalancesBigUnits=function(e,t,r){return U(e,t,new n(r).multipliedBy(g(4)).decimalPlaces(0,n.ROUND_DOWN))},exports.calculateIncentivesAPY=ae,exports.calculateLinearInterest=N,exports.calculateReserveDebt=ee,exports.calculateReserveDebtSuppliesRaw=ne,exports.calculateRewards=ie,exports.calculateSupplies=re,exports.computeRawUserSummaryData=Z,exports.computeUserReserveData=J,exports.cosntantAddressesByNetwork=Ae,exports.formatReserves=te,exports.formatUserSummaryData=$,exports.gasLimitRecommendations=we,exports.getCompoundedBalance=I,exports.getCompoundedStableBalance=M,exports.getEthAndUsdBalance=z,exports.getLinearBalance=V,exports.getReserveNormalizedIncome=L,exports.normalize=v,exports.normalizeBN=h,exports.pow10=g,exports.rayDiv=S,exports.rayMul=C,exports.rayPow=D,exports.rayToDecimal=function(e){return m(e).dividedBy(w)},exports.rayToWad=B,exports.uniswapEthAmount="0.1",exports.v1=Q,exports.v2=me,exports.valueToBigNumber=y,exports.valueToZDBigNumber=m,exports.wadDiv=function(e,t){return m(t).div(2).plus(m(e).multipliedBy(b)).div(t)},exports.wadMul=function(e,t){return x.plus(m(e).multipliedBy(t)).div(b)},exports.wadToRay=P;
//# sourceMappingURL=protocol-js.cjs.production.min.js.map
